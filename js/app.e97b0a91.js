(function(t){function e(e){for(var i,s,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/geosimlab-episim/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0386":function(t,e,n){t.exports=n.p+"img/darkmode.a447d0e4.jpg"},1751:function(t,e,n){},"1ce1":function(t,e,n){t.exports=n.p+"img/thumb-v6.d9eed6d6.png"},"1eaf":function(t,e,n){"use strict";var i=n("9619"),o=n.n(i);o.a},"234c":function(t,e,n){"use strict";n.r(e),e["default"]="time\tday\tnSusceptible\tnInfectedButNotContagious\tnContagious\tnShowingSymptoms\tnSeriouslySick\tnCritical\tnTotalInfected\tnInfectedCumulative\tnRecovered\tnInQuarantine\tdistrict\r\n86400.0\t1\t4696700\t1000\t0\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n172800.0\t2\t4696700\t1000\t0\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n259200.0\t3\t4696700\t1000\t0\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n345600.0\t4\t4696700\t0\t1000\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n432000.0\t5\t4692400\t4300\t1000\t0\t0\t0\t5300\t5300\t0\t0\tunknown\r\n518400.0\t6\t4692100\t4600\t100\t900\t0\t0\t5600\t5600\t0\t900\tunknown\r\n604800.0\t7\t4692100\t4600\t100\t900\t0\t0\t5600\t5600\t0\t900\tunknown\r\n691200.0\t8\t4692100\t300\t4400\t900\t0\t0\t5600\t5600\t0\t900\tunknown\r\n777600.0\t9\t4673300\t18800\t4700\t900\t0\t0\t24400\t24400\t0\t900\tunknown\r\n864000.0\t10\t4671100\t21000\t1000\t4400\t200\t0\t26600\t26600\t0\t4600\tunknown\r\n950400.0\t11\t4671000\t21100\t700\t4700\t200\t0\t26700\t26700\t0\t4900\tunknown\r\n1036800.0\t12\t4671000\t2300\t19500\t4700\t200\t0\t26700\t26700\t0\t4900\tunknown\r\n1123200.0\t13\t4538600\t132500\t21700\t4700\t200\t0\t159100\t159100\t0\t4900\tunknown\r\n1209600.0\t14\t4518700\t152300\t7000\t19300\t400\t0\t179000\t179000\t0\t19700\tunknown\r\n1296000.0\t15\t4517600\t153400\t5100\t21200\t400\t0\t180100\t180100\t0\t21600\tunknown\r\n1382400.0\t16\t4516600\t22000\t137400\t20500\t400\t0\t180300\t181100\t800\t21600\tunknown\r\n1468800.0\t17\t3846800\t671900\t157300\t20500\t400\t0\t850100\t850900\t800\t20900\tunknown\r\n1555200.0\t18\t3751300\t766300\t54100\t124000\t1200\t0\t945600\t946400\t800\t125200\tunknown\r\n1641600.0\t19\t3740100\t776500\t39200\t139800\t1100\t200\t956800\t957600\t800\t141100\tunknown\r\n1728000.0\t20\t3735700\t111100\t707700\t137000\t1100\t200\t957100\t962000\t4900\t141800\tunknown\r\n1814400.0\t21\t2671600\t1079700\t802400\t137500\t1100\t200\t2020900\t2026100\t5200\t139100\tunknown\r\n1900800.0\t22\t2560300\t1179800\t274000\t670300\t7900\t200\t2132200\t2137400\t5200\t678400\tunknown\r\n1987200.0\t23\t2544200\t1191500\t199700\t747900\t6900\t2100\t2148100\t2153500\t5400\t757100\tunknown\r\n2073600.0\t24\t2537100\t134500\t1251300\t742300\t6800\t2300\t2137200\t2160600\t23400\t765400\tunknown\r\n2160000.0\t25\t1940100\t620200\t1358900\t743900\t6800\t2300\t2732100\t2757600\t25500\t754800\tunknown\r\n2246400.0\t26\t1873000\t671200\t524300\t1564800\t36500\t2300\t2799100\t2824700\t25600\t1603600\tunknown\r\n2332800.0\t27\t1863100\t674000\t441600\t1649900\t34000\t9300\t2808800\t2834600\t25800\t1693400\tunknown\r\n2419200.0\t28\t1855200\t84900\t997300\t1565300\t33300\t10300\t2691100\t2842500\t151400\t1706400\tunknown\r\n2505600.0\t29\t1600100\t272900\t1054700\t1556200\t33300\t10300\t2927400\t3097600\t170200\t1614600\tunknown\r\n2592000.0\t30\t1551600\t311500\t589100\t1985900\t78100\t10300\t2974900\t3146100\t171200\t2074900\tunknown\r\n2678400.0\t31\t1542900\t312300\t545200\t2032500\t69900\t21900\t2981800\t3154800\t173000\t2125900\tunknown\r\n2764800.0\t32\t1536900\t63200\t661900\t1530000\t71000\t21500\t2347600\t3160800\t813200\t2132500\tunknown\r\n2851200.0\t33\t1388500\t163100\t688400\t1461000\t71300\t21400\t2405200\t3309200\t904000\t1627700\tunknown\r\n2937600.0\t34\t1343900\t199000\t490300\t1633400\t94800\t21400\t2438900\t3353800\t914900\t1757800\tunknown\r\n3024000.0\t35\t1334700\t202200\t457700\t1665000\t83500\t28500\t2436900\t3363000\t926100\t1787200\tunknown\r\n3110400.0\t36\t1330300\t58200\t385700\t865400\t89700\t21900\t1420900\t3367400\t1946500\t1783900\tunknown\r\n3196800.0\t37\t1240800\t103100\t403600\t784800\t90600\t21100\t1403200\t3456900\t2053700\t982200\tunknown\r\n3283200.0\t38\t1202700\t132000\t292100\t879900\t100700\t21300\t1426000\t3495000\t2069000\t1014300\tunknown\r\n3369600.0\t39\t1196800\t133500\t260400\t906600\t71400\t23400\t1395300\t3500900\t2105600\t1036600\tunknown\r\n3456000.0\t40\t1193400\t47400\t219800\t463000\t77900\t12400\t820500\t3504300\t2683800\t1009600\tunknown\r\n3542400.0\t41\t1134100\t68600\t239000\t417200\t79300\t10900\t815000\t3563600\t2748600\t556700\tunknown\r\n3628800.0\t42\t1110100\t86700\t170400\t475900\t86000\t10800\t829800\t3587600\t2757800\t580200\tunknown\r\n3715200.0\t43\t1106400\t87000\t141200\t498500\t41700\t12600\t781000\t3591300\t2810300\t602600\tunknown\r\n3801600.0\t44\t1104600\t29500\t145000\t308500\t44900\t5900\t533800\t3593100\t3059300\t557300\tunknown\r\n3888000.0\t45\t1074400\t35700\t155700\t275400\t44700\t5700\t517200\t3623300\t3106100\t361700\tunknown\r\n3974400.0\t46\t1064200\t42200\t111100\t311600\t48400\t5400\t518700\t3633500\t3114800\t372300\tunknown\r\n4060800.0\t47\t1061800\t42800\t92700\t323800\t26500\t6000\t491800\t3635900\t3144100\t384800\tunknown\r\n4147200.0\t48\t1061300\t13100\t89300\t215200\t25800\t4500\t347900\t3636400\t3288500\t359300\tunknown\r\n4233600.0\t49\t1047300\t16900\t88200\t184000\t25900\t3900\t318900\t3650400\t3331500\t246900\tunknown\r\n4320000.0\t50\t1042000\t19800\t64600\t198100\t29000\t4000\t315500\t3655700\t3340200\t238800\tunknown\r\n4406400.0\t51\t1040100\t21200\t57100\t200600\t19100\t5100\t303100\t3657600\t3354500\t238100\tunknown\r\n4492800.0\t52\t1039800\t7500\t52700\t132900\t18300\t3600\t215000\t3657900\t3442900\t226500\tunknown\r\n4579200.0\t53\t1030700\t11300\t49400\t105500\t18500\t3300\t188000\t3667000\t3479000\t155200\tunknown\r\n4665600.0\t54\t1028200\t11900\t38400\t111100\t20300\t3100\t184800\t3669500\t3484700\t138800\tunknown\r\n4752000.0\t55\t1026900\t12900\t33700\t112500\t13700\t3500\t176300\t3670800\t3494500\t138500\tunknown\r\n4838400.0\t56\t1026800\t3900\t28500\t70700\t12200\t2900\t118200\t3670900\t3552700\t131200\tunknown\r\n4924800.0\t57\t1022700\t5500\t26200\t53000\t12100\t2300\t99100\t3675000\t3575900\t86000\tunknown\r\n5011200.0\t58\t1022000\t4900\t19300\t57200\t12200\t2300\t95900\t3675700\t3579800\t74900\tunknown\r\n5097600.0\t59\t1021800\t5000\t16800\t57700\t9100\t2200\t90800\t3675900\t3585100\t73900\tunknown\r\n5184000.0\t60\t1021800\t900\t14800\t35300\t8100\t1100\t60200\t3675900\t3615700\t69900\tunknown\r\n5270400.0\t61\t1020800\t1200\t12200\t28800\t8000\t800\t51000\t3676900\t3625900\t44600\tunknown\r\n5356800.0\t62\t1020800\t1000\t8500\t30000\t8400\t700\t48600\t3676900\t3628300\t40800\tunknown\r\n5443200.0\t63\t1020800\t1000\t7800\t30200\t4900\t800\t44700\t3676900\t3632200\t39700\tunknown\r\n5529600.0\t64\t1020800\t0\t6200\t19300\t3900\t300\t29700\t3676900\t3647200\t36000\tunknown\r\n5616000.0\t65\t1020100\t700\t4900\t15700\t3900\t100\t25300\t3677600\t3652300\t23500\tunknown\r\n5702400.0\t66\t1020100\t700\t3600\t15000\t4000\t100\t23400\t3677600\t3654200\t20600\tunknown\r\n5788800.0\t67\t1020100\t700\t3500\t14800\t2200\t100\t21300\t3677600\t3656300\t19100\tunknown\r\n5875200.0\t68\t1020100\t0\t2600\t7800\t1800\t100\t12300\t3677600\t3665300\t17100\tunknown\r\n5961600.0\t69\t1019700\t400\t2300\t5600\t1600\t100\t10000\t3678000\t3668000\t9700\tunknown\r\n6048000.0\t70\t1019700\t400\t1400\t5200\t1600\t100\t8700\t3678000\t3669300\t7800\tunknown\r\n6134400.0\t71\t1019700\t400\t1400\t5100\t1100\t100\t8100\t3678000\t3669900\t6900\tunknown\r\n6220800.0\t72\t1019700\t0\t900\t2100\t800\t0\t3800\t3678000\t3674200\t6300\tunknown\r\n6307200.0\t73\t1019600\t100\t800\t1500\t700\t0\t3100\t3678100\t3675000\t2900\tunknown\r\n6393600.0\t74\t1019600\t100\t400\t1600\t800\t0\t2900\t3678100\t3675200\t2500\tunknown\r\n6480000.0\t75\t1019600\t100\t400\t1600\t300\t0\t2400\t3678100\t3675700\t2400\tunknown\r\n6566400.0\t76\t1019600\t0\t400\t700\t300\t0\t1400\t3678100\t3676700\t1900\tunknown\r\n6652800.0\t77\t1019600\t0\t400\t700\t300\t0\t1400\t3678100\t3676700\t1000\tunknown\r\n6739200.0\t78\t1019600\t0\t300\t700\t400\t0\t1400\t3678100\t3676700\t1100\tunknown\r\n6825600.0\t79\t1019600\t0\t300\t700\t200\t0\t1200\t3678100\t3676900\t1100\tunknown\r\n6912000.0\t80\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t900\tunknown\r\n6998400.0\t81\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t500\tunknown\r\n7084800.0\t82\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t500\tunknown\r\n7171200.0\t83\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t500\tunknown\r\n7257600.0\t84\t1019600\t0\t0\t100\t200\t0\t300\t3678100\t3677800\t500\tunknown\r\n7344000.0\t85\t1019600\t0\t0\t100\t200\t0\t300\t3678100\t3677800\t300\tunknown\r\n7430400.0\t86\t1019600\t0\t0\t100\t200\t0\t300\t3678100\t3677800\t300\tunknown\r\n7516800.0\t87\t1019600\t0\t0\t100\t100\t0\t200\t3678100\t3677900\t300\tunknown\r\n7603200.0\t88\t1019600\t0\t0\t0\t100\t0\t100\t3678100\t3678000\t200\tunknown\r\n7689600.0\t89\t1019600\t0\t0\t0\t100\t0\t100\t3678100\t3678000\t100\tunknown\r\n7776000.0\t90\t1019600\t0\t0\t0\t100\t0\t100\t3678100\t3678000\t100\tunknown\r\n7862400.0\t91\t1019600\t0\t0\t0\t0\t0\t0\t3678100\t3678100\t100\tunknown\r\n7948800.0\t92\t1019600\t0\t0\t0\t0\t0\t0\t3678100\t3678100\t0\tunknown\r\n"},"2d28":function(t,e,n){},"2ffc":function(t,e,n){},"338b":function(t,e,n){"use strict";var i=n("b959"),o=n.n(i);o.a},3425:function(t,e,n){"use strict";var i=n("2ffc"),o=n.n(i);o.a},"36f6":function(t,e,n){t.exports=n.p+"img/geosimlab-logo.495d709a.webp"},"3b17":function(t,e,n){"use strict";var i=n("1751"),o=n.n(i);o.a},"40f5":function(t,e,n){"use strict";var i=n("a434"),o=n.n(i);o.a},"57e9":function(t,e,n){"use strict";var i=n("c027"),o=n.n(i);o.a},"5adc":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var i=n("9c0c"),o=n.n(i);o.a},"67cc":function(t,e,n){"use strict";n.r(e),e["default"]="// fragment shader: pixel colors\n\nuniform float simulationTime;\nuniform vec3 cSusceptible;\nuniform vec3 cInfectedButNotContagious;\nuniform vec3 cContagious;\nuniform vec3 cSymptomatic;\nuniform vec3 cSeriouslyIll;\nuniform vec3 cCritical;\nuniform vec3 cRecovered;\n\n// passed in from vertex shader:\nvarying float myInfectionStatus;\nvarying float skip;\nvarying float atRest;\n\n\nvec4 getColor() {\n\n    if (myInfectionStatus == 0.0) {\n        return vec4(cSusceptible, 1.0);  // susceptible; not moving\n\n    } else if (myInfectionStatus == 1.0) {\n\n        return vec4(cInfectedButNotContagious, 1.0);  // infected; cyan\n\n    } else if (myInfectionStatus == 2.0) {\n\n        return vec4(cContagious, 1.0);  // contagious; red\n\n    } else if (myInfectionStatus == 3.0) {\n\n        return vec4(cSymptomatic, 1.0);\n\n    } else if (myInfectionStatus == 4.0) {\n\n        return vec4(cSeriouslyIll, 1.0);\n\n    } else if (myInfectionStatus == 5.0) {\n\n        return vec4(cCritical, 1.0);\n    }\n    return vec4(cRecovered, 1.0);\n}\n\n\nvoid main() {\n    // don't do anything if this trip is currently out of time bounds\n    if (skip == 1.0) {\n\n        gl_FragColor = vec4(0,0,0,0);\n\n    } else {\n\n        gl_FragColor = getColor();\n\n    }\n}\n\n/******\nuniform vec3 color;\nuniform vec3 selectedColor;\nuniform float timestepFraction;\n\nuniform sampler2D triangle;\nuniform sampler2D circle;\n\nvarying float vRotation;\nvarying float vShouldInterpolate;\nvarying float vIsSelected;\n\nvec2 rotateCoordinates() {\n    mat2 rotationMatrix = mat2(cos(vRotation), sin(vRotation), -sin(vRotation), cos(vRotation));\n\n    vec2 centerBasedCoord = vec2(gl_PointCoord.x -0.5, gl_PointCoord.y - 0.5);\n    vec2 centerBasedRotatedCoord = centerBasedCoord * rotationMatrix;\n    return centerBasedRotatedCoord + 0.5;\n}\n\nvec4 getColor() {\n\n    vec4 result;\n\n    if (vIsSelected >= 1.0) {\n        result = vec4(selectedColor, 1.0);\n    }\n    else {\n        result = vec4(color, 1.0);\n    }\n    return result;\n}\n\nvoid main() {\n\n    vec4 opaqueColor = getColor();\n\n    if (vShouldInterpolate >= 1.0) {\n        vec2 coord = rotateCoordinates();\n        gl_FragColor = opaqueColor * texture2D(triangle, coord);\n    } else {\n        opaqueColor.a = 1.0 - timestepFraction;\n        gl_FragColor = opaqueColor * texture2D(circle, gl_PointCoord);\n    }\n\n    if ( gl_FragColor.a < ALPHATEST ) discard;\n}\n******/\n"},"6b3e":function(t,e,n){"use strict";var i=n("a82e"),o=n.n(i);o.a},"7be7":function(t,e,n){"use strict";var i=n("5adc"),o=n.n(i);o.a},8237:function(t,e,n){t.exports=n.p+"img/tau-logo.9ef9279e.png"},"85e2":function(t,e,n){t.exports=n.p+"img/v3-thumb.26724f5c.png"},"8a2f":function(t,e,n){},"8cb2":function(t,e,n){"use strict";var i=n("b990"),o=n.n(i);o.a},9619:function(t,e,n){},"96c6":function(t,e){var n='<h3 id="no-results-for-that-model">No results for that model</h3> <p>Not all model versions have published results.</p> <p><strong>Version 3</strong> (v3) only has the animated visualization published, which can be seen <a href="/v3">here</a>.</p> <p><strong>Version 6</strong> (v6) was an internal draft, and its outputs were quickly superceded by <a href="%5Bhere%5D(/v7">version 7</a>.</p> ';t.exports=n},"9a44":function(t,e,n){"use strict";n.r(e),e["default"]="// fragment shader: pixel colors\n\nuniform float simulationTime;\nuniform vec3 cSusceptible;\nuniform vec3 cInfectedButNotContagious;\nuniform vec3 cContagious;\nuniform vec3 cSymptomatic;\nuniform vec3 cSeriouslyIll;\nuniform vec3 cCritical;\nuniform vec3 cRecovered;\n\n// passed in from vertex shader:\nvarying float myInfectionStatus;\nvarying float skip;\nvarying float atRest;\n\n\nvec4 getColor() {\n\n    if (myInfectionStatus == 0.0) {\n        return vec4(cSusceptible, 1.0);  // susceptible; not moving\n\n    } else if (myInfectionStatus == 1.0) {\n\n        return vec4(cInfectedButNotContagious, 1.0);  // infected; cyan\n\n    } else if (myInfectionStatus == 2.0) {\n\n        return vec4(cContagious, 1.0);  // contagious; red\n\n    } else if (myInfectionStatus == 3.0) {\n\n        return vec4(cSymptomatic, 1.0);\n\n    } else if (myInfectionStatus == 4.0) {\n\n        return vec4(cSeriouslyIll, 1.0);\n\n    } else if (myInfectionStatus == 5.0) {\n\n        return vec4(cCritical, 1.0);\n    }\n    return vec4(cRecovered, 1.0);\n}\n\n\nvoid main() {\n    // don't do anything if this trip is currently out of time bounds\n    if (skip == 1.0) {\n\n        gl_FragColor = vec4(0,0,0,0);\n\n    } else {\n\n        gl_FragColor = getColor();\n\n    }\n}\n\n/******\nuniform vec3 color;\nuniform vec3 selectedColor;\nuniform float timestepFraction;\n\nuniform sampler2D triangle;\nuniform sampler2D circle;\n\nvarying float vRotation;\nvarying float vShouldInterpolate;\nvarying float vIsSelected;\n\nvec2 rotateCoordinates() {\n    mat2 rotationMatrix = mat2(cos(vRotation), sin(vRotation), -sin(vRotation), cos(vRotation));\n\n    vec2 centerBasedCoord = vec2(gl_PointCoord.x -0.5, gl_PointCoord.y - 0.5);\n    vec2 centerBasedRotatedCoord = centerBasedCoord * rotationMatrix;\n    return centerBasedRotatedCoord + 0.5;\n}\n\nvec4 getColor() {\n\n    vec4 result;\n\n    if (vIsSelected >= 1.0) {\n        result = vec4(selectedColor, 1.0);\n    }\n    else {\n        result = vec4(color, 1.0);\n    }\n    return result;\n}\n\nvoid main() {\n\n    vec4 opaqueColor = getColor();\n\n    if (vShouldInterpolate >= 1.0) {\n        vec2 coord = rotateCoordinates();\n        gl_FragColor = opaqueColor * texture2D(triangle, coord);\n    } else {\n        opaqueColor.a = 1.0 - timestepFraction;\n        gl_FragColor = opaqueColor * texture2D(circle, gl_PointCoord);\n    }\n\n    if ( gl_FragColor.a < ALPHATEST ) discard;\n}\n******/\n"},"9c0c":function(t,e,n){},"9e9b":function(t,e,n){"use strict";var i=n("8a2f"),o=n.n(i);o.a},a22d:function(t,e){var n="<p>Hundreds of scenario combinations are run to produce the following &quot;What if?&quot; estimates of viral propagation under different conditions.</p> <ul> <li>&quot;v1&quot; contains the strategies discussed in the paper.</li> <li>&quot;v3&quot; contains a visual illustration of the method, linked above.</li> <li>&quot;v5&quot; was used in part to brief the BMBF on Apr/9 about school re-opening options.</li> <li>&quot;v6&quot; was a rapid work-in-progress that was superceded by v7.</li> <li>All others contain strategies that were in the public discussion after the above paper was made available.</li> </ul> <p>The model is under intense development. The following versions have been released:</p> ";t.exports=n},a434:function(t,e,n){},a82e:function(t,e,n){},ab5b:function(t,e,n){t.exports=n.p+"img/matsim-logo-white.8efbea0b.png"},b959:function(t,e,n){},b990:function(t,e,n){},c027:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("top-nav-bar",{style:{paddingLeft:t.state.isFullScreen?"0rem":""},attrs:{id:"nav"}}),n("div",{staticClass:"thing"},[n("router-view")],1),t.state.isFullScreen?t._e():n("div",{staticClass:"footer"},[t._m(0),t._m(1),n("p",[t._v("Agent-based Epidemic Simulation, © 2020 Geosimlab Tel Aviv University")]),t._m(2)])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"geosimlab",attrs:{href:"https://www.geosimlab.org/",target:"_blank"}},[i("img",{attrs:{src:n("36f6")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{attrs:{href:"https://matsim.org"}},[i("img",{attrs:{alt:"MATSim logo",src:n("ab5b"),width:"250"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("For more info about Geosimlab, see "),n("a",{attrs:{href:"https://www.geosimlab.org/"}},[t._v(" https://www.geosimlab.org/")])])}],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar is-link",attrs:{role:"navigation","aria-label":"main navigation"}},[n("div",{staticClass:"navbar-brand"},[n("router-link",{staticClass:"home-link navbar-item",attrs:{to:"/"}},[t._v("Home")]),n("a",{staticClass:"navbar-burger burger",class:{"is-active":t.isBurgerActive},attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},on:{click:t.clickedBurger}},[n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}})])],1),n("div",{staticClass:"navbar-menu",class:{"is-active":t.isBurgerActive},attrs:{id:"navbarBasicExample"},on:{click:t.clickedBurger}},[n("div",{staticClass:"navbar-start"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/tama?day=5"}},[t._v("Tel Aviv")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/jlm?day=5"}},[t._v("Jerusalem")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/credits"}},[t._v("Credits")])],1)])])},r=[],c=n("d4ec"),l=n("bee2"),u=n("262e"),d=n("2caf"),m=n("9ab4"),h=n("60a3"),p=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.isBurgerActive=!1,t.isDropdownActive=!1,t}return Object(l["a"])(n,[{key:"clickedBurger",value:function(){this.isBurgerActive=!this.isBurgerActive}},{key:"mounted",value:function(){}},{key:"routeChanged",value:function(t,e){console.log(this.$route),this.isBurgerActive=!1,this.isDropdownActive=!1}}]),n}(h["c"]);Object(m["a"])([Object(h["d"])("$route")],p.prototype,"routeChanged",null),p=Object(m["a"])([Object(h["a"])({})],p);var f,v,g=p,b=g,y=(n("9e9b"),n("2877")),k=Object(y["a"])(b,s,r,!1,null,"166fe928",null),w=k.exports,S=n("2f62");(function(t){t["LightMode"]="light",t["DarkMode"]="dark"})(f||(f={})),function(t){t["Susceptible"]="susceptible",t["InfectedButNotContagious"]="infectedButNotContagious",t["Contagious"]="contagious"}(v||(v={}));var C={text:"#000",background:"#ccccc4",links:"#ffffff",susceptible:"#999900",infectedButNotContagious:"#0077ff",contagious:"#bb0044",symptomatic:"#ff5533",seriouslyIll:"#7733ee",critical:"#000",recovered:"#116622"},O={text:"#fff",background:"#181518",links:"#445577",susceptible:"#bbbb44",infectedButNotContagious:"#00dddd",contagious:"#ff2299",symptomatic:"#ff5533",seriouslyIll:"#7733ee",critical:"#fff",recovered:"#116622"};i["default"].use(S["a"]);var T=new S["a"].Store({state:{statusMessage:"loading",clock:"",isRunning:!0,isFullScreen:!1,isShowingHelp:!1,colorScheme:localStorage.getItem("colorscheme")?localStorage.getItem("colorscheme"):f.DarkMode,sawAgentAnimationHelp:!!localStorage.getItem("agentAnimHelp")&&localStorage.getItem("agentAnimHelp")},mutations:{setFullScreen:function(t,e){t.isFullScreen=e},setStatusMessage:function(t,e){t.statusMessage=e},setClock:function(t,e){t.clock=e},setSimulation:function(t,e){t.isRunning=e},setShowingHelp:function(t,e){t.isShowingHelp=e},setSawAgentAnimationHelp:function(t,e){t.sawAgentAnimationHelp=e,localStorage.setItem("agentAnimHelp","seen")},rotateColors:function(t){t.colorScheme=t.colorScheme===f.DarkMode?f.LightMode:f.DarkMode,localStorage.setItem("colorscheme",t.colorScheme)}},actions:{},modules:{}}),x={name:"App",components:{TopNavBar:w},data:function(){return{state:T.state}}},j=x,_=(n("5c0b"),Object(y["a"])(j,o,a,!1,null,null,null)),I=_.exports,A=n("8c4f"),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"home"}},[t._m(0),n("div",{staticClass:"page-area"},[n("colophon",{staticClass:"colophon"}),n("div",{staticClass:"content"},[n("div",{staticClass:"main"},[t._m(1),n("h2",[t._v("Interactive Visualizations")]),n("p",[t._v("The following interactive visualizations help to illustrate the method and results which emerge from the model. These are produced directly from simulated model results. Note that due to the advanced nature of the visualizations, only modern versions of recent web browsers are supported.")]),n("div",{staticClass:"viz-cards"},t._l(t.visualizations,(function(t){return n("div",{key:t.url,staticClass:"one-viz"},[n("router-link",{attrs:{to:t.url}},[n("viz-card",{attrs:{viz:t}})],1)],1)})),0)])])],1)])},R=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner"},[n("h2"),n("h3",[t._v("Agent-based Epidemic Simulation")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top"},[n("p",{staticClass:"headline"},[t._v("We build advanced human mobility models, and attach virus infection dynamics taken from recent literature and publications."),n("br"),t._v("This results in a virus spreading dynamics model.")]),n("p",[t._v("This site is the central hub for COVID-19 virus spreading research from the Transport Systems Planning and Transport Telematics group (VSP), Institute for Land and Sea Transport at TU Berlin. This research uses the "),n("a",{attrs:{href:"https://github.com/matsim-org/matsim-episim"}},[n("b",[t._v("MATSim-Episim")])]),t._v(" virus spreading model.")]),n("h2",[t._v("Method: Mobility traces and the spreading of COVID-19")]),n("p",[t._v("The MATSim-Episim virus spreading dynamics model is described in this paper:"),n("br"),n("a",{attrs:{href:" https://doi.org/10.1101/2020.07.22.20160093"}},[t._v(" https://doi.org/10.1101/2020.07.22.20160093 .")])]),n("p",[t._v("The code is freely available and open source:"),n("br"),n("a",{attrs:{href:"https://github.com/matsim-org/matsim-episim"}},[t._v("https://github.com/matsim-org/matsim-episim .")])])])}],E=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},L=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"colophon-content"}},[i("div",{staticClass:"logo",staticStyle:{width:"100%"}},[i("p",[i("a",{attrs:{href:"https://www.tau.ac.il/",target:"_blank"}},[i("img",{attrs:{src:n("8237")}})])])]),i("div",{staticClass:"professor"},[t._v("Itzhak Benenson, Professor")]),i("p",{staticClass:"nonbreak"},[i("a",{attrs:{href:"mailto:bennya@post.tau.ac.il"}},[t._v("bennya@post.tau.ac.il")])]),i("div",{staticClass:"team"},[t._v("Geosimlab Team")]),i("p",[t._v("Golan Ben-Dor")]),i("p",[t._v("Dr. Ido Klein")]),i("p",[t._v("Dr. Aleksey Ogulenko")]),i("div",{staticClass:"team"},[t._v("Contact")]),i("p",[t._v("Department of Geography and Human Environment ")]),i("p",[t._v("Porter School of Environment and Earth Sciences ")]),i("p",[t._v("Faculty of Exact Sciences, Tel-Aviv University ")]),i("p",[t._v("P.O.B 39040, Ramat Aviv, Tel-Aviv 69978 Israel")]),i("p",[i("a",{staticClass:"geosimlab",attrs:{href:"https://www.geosimlab.org/",target:"_blank"}},[i("img",{attrs:{src:n("36f6")}})])])])}],D={name:"Colophon",components:{}},P=D,N=(n("8cb2"),Object(y["a"])(P,E,L,!1,null,"7f30bf0e",null)),z=N.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"vue-component"}},[n("div",{staticClass:"report-list"},t._l(t.reports,(function(e){return n("div",{key:e.title,staticClass:"report-tab",class:{active:e===t.selectedReport},on:{click:function(n){return t.changeReport(e)}}},[n("p",[t._v(t._s(e.title))])])})),0),n("div",{staticClass:"report-details"},[n("div",{staticClass:"banner"},[n("p",{staticStyle:{flex:"1","margin-right":"0.5rem"}},[t._v("Summary of report:")]),n("button",{staticClass:"button is-danger",on:{click:function(e){return t.clickedDownload()}}},[t._v("Get Full PDF (Deutsch)")])]),n("p",{staticClass:"report-summary",domProps:{innerHTML:t._s(t.selectedReport.html)}})])])},$=[],F=(n("d3b7"),n("b85c")),H=(n("96cf"),n("1da1")),Y=n("d4cd"),q=n.n(Y),U=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.mdParser=new q.a,t.reports=[{md:"/reports/report-2020-07-24.md",title:"24 July 2020",url:"http://dx.doi.org/10.14279/depositonce-10417",html:""},{md:"/reports/report-2020-07-03.md",title:"03 July 2020",url:"http://dx.doi.org/10.14279/depositonce-10373",html:""},{md:"/reports/report-2020-06-19.md",title:"19 Jun 2020",url:"https://doi.org/10.14279/depositonce-10335",html:""},{md:"/reports/report-2020-06-05.md",title:"05 Jun 2020",url:"http://dx.doi.org/10.14279/depositonce-10152",html:""},{md:"/reports/report-2020-05-20.md",title:"20 May 2020",url:"http://dx.doi.org/10.14279/depositonce-10085",html:""},{md:"/reports/report-2020-05-07.md",title:"07 May 2020",url:"https://doi.org/10.14279/depositonce-10018",html:""},{md:"/reports/report-2020-04-24.md",title:"24 Apr 2020",url:"https://doi.org/10.14279/depositonce-10017",html:""},{md:"/reports/report-2020-04-08.md",title:"08 Apr 2020",url:"https://doi.org/10.14279/depositonce-10016",html:""}],t.selectedReport=t.reports[0],t}return Object(l["a"])(n,[{key:"mounted",value:function(){this.loadReports()}},{key:"clickedDownload",value:function(){window.location.href=this.selectedReport.url}},{key:"changeReport",value:function(t){this.selectedReport=t}},{key:"loadReports",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(F["a"])(this.reports),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=15;break}return i=n.value,t.next=7,fetch(i.md);case 7:return o=t.sent,t.next=10,o.text();case 10:a=t.sent,s=this.mdParser.render(a),i.html=s;case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),e.e(t.t0);case 20:return t.prev=20,e.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[1,17,20,23]])})));function e(){return t.apply(this,arguments)}return e}()}]),n}(h["c"]);U=Object(m["a"])([Object(h["a"])({components:{},props:{}})],U);var G=U,V=G,X=(n("6b3e"),Object(y["a"])(V,B,$,!1,null,"14289747",null)),W=X.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-image",style:{"background-image":"url("+t.thumbnail+")"}}),n("div",{staticClass:"card-title"},[t._v(t._s(t.viz.title))]),n("div",{staticClass:"card-id"},[n("div",{staticClass:"card-endnotes"},[t._v(t._s(t.vizNumber))])]),n("div",{staticClass:"card-subtitle"},[t._v(t._s(t.viz.subtitle))]),n("div",{staticClass:"card-date"},[t._v(t._s(t.viz.date))])])},J=[],K=(n("c975"),n("fb6a"),function(t){Object(u["a"])(i,t);var e=Object(d["a"])(i);function i(){return Object(c["a"])(this,i),e.apply(this,arguments)}return Object(l["a"])(i,[{key:"vizNumber",get:function(){return this.viz.url.slice(1)}},{key:"thumbnail",get:function(){if(this.viz.url.indexOf("v3")>-1){var t=n("85e2");return t}if(this.viz.url.indexOf("timelapse")>-1){var e=n("85e2");return e}var i=n("1ce1");return i}}]),i}(h["c"]));Object(m["a"])([Object(h["b"])({required:!0})],K.prototype,"viz",void 0),K=Object(m["a"])([Object(h["a"])({props:{viz:{}}})],K);var Q=K,tt=Q,et=(n("d469"),Object(y["a"])(tt,Z,J,!1,null,"7b286f98",null)),nt=et.exports,it=function(t){Object(u["a"])(i,t);var e=Object(d["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.readme=n("a22d"),t.visualizations=[{url:"/tama?day=5",title:"Tel Aviv Metropolitan Area",subtitle:"Simulation of the epidemic outbreak in Tel Aviv Metropolitan Area"},{url:"/jlm?day=5",title:"Jerusalem Metropolin",subtitle:"Simulation of the epidemic outbreak in Jerusalem"}],t}return i}(h["c"]);it=Object(m["a"])([Object(h["a"])({components:{Colophon:z,ReportViewer:W,VizCard:nt},props:{}})],it);var ot=it,at=ot,st=(n("57e9"),Object(y["a"])(at,M,R,!1,null,"038d9b21",null)),rt=st.exports,ct=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"vue-component"}},[n("div",{staticClass:"content"},[n("h2",[t._v("Geosimlab Team")]),n("p",[t._v("Based on high-resolution GIS and big data on human and institutions’ spatial behavior, we model the complex geographic system as collectives of decision-makers who define system’s spatio-temporal dynamics and evolve themselves.")]),n("h2",[t._v("VSP TU-Berlin")]),n("p",[t._v("Transport Systems Planning and Transport Telematics group (VSP) of Institute for Land and Sea Transport at TU Berlin has developed an open source visualization platform for epidemic simulations. The platfrom is available at "),n("a",{attrs:{href:"https://covid-sim.info/"}},[t._v(" https://covid-sim.info. ")])]),n("p",[t._v("For more information about VSP group, see "),n("a",{attrs:{href:"https://www.vsp.tu-berlin.de"}},[t._v(" https://vsp.tu-berlin.de")])]),n("h2",[t._v("MATSim-EpiSim")]),n("p",[t._v("EpiSim provides epidemic simulation based on MATSim framework.")]),n("p",[n("a",{attrs:{href:"https://github.com/matsim-org/matsim-episim/"}},[t._v("Github repository")])]),n("h2",[t._v("MATSim ")]),n("p",[t._v("MATSim provides a framework to implement large-scale agent-based transport simulations. The framework consists of several modules which can be combined or used stand-alone. Modules can be replaced by custom implementations to test single aspects of your own work.")]),n("p",[t._v("Currently, MATSim offers a framework for demand-modeling, agent-based mobility-simulation (traffic flow simulation), re-planning, a controler to iteratively run simulations as well as methods to analyze the output generated by the modules.")]),n("p",[t._v("For more information about MATSim, see "),n("a",{attrs:{href:"https://matsim.org/"}},[t._v(" https://matsim.org/.")])])])])}],ut=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return n}(h["c"]);ut=Object(m["a"])([Object(h["a"])({components:{}})],ut);var dt=ut,mt=dt,ht=(n("3425"),Object(y["a"])(mt,ct,lt,!1,null,"465e56cc",null)),pt=ht.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"vue-component"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"stuff",domProps:{innerHTML:t._s(t.mdContent)}}),n("hr"),n("p",[t._v("Go back to the "),n("router-link",{attrs:{to:"/"}},[t._v("main page.")])],1)])])},vt=[],gt=function(t){Object(u["a"])(i,t);var e=Object(d["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.mdContent="",t.mdParser=new q.a,t.currentCity=-1,t}return Object(l["a"])(i,[{key:"mounted",value:function(){var t=n("96c6");this.mdContent=t}}]),i}(h["c"]);gt=Object(m["a"])([Object(h["a"])({components:{}})],gt);var bt=gt,yt=bt,kt=(n("7be7"),Object(y["a"])(yt,ft,vt,!1,null,"61c890d7",null)),wt=kt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"v3-app"}},[i("animation-view",{staticClass:"anim",attrs:{speed:t.speed,day:t.newDay,showSusceptible:t.showSusceptible},on:{loaded:t.toggleLoaded}}),i("div",{staticClass:"nav"},[t.state.statusMessage?t._e():i("p",{staticClass:"big time"},[t._v("Tel Aviv Metropolitan Area: Outbreak Day "+t._s(t.newDay))]),i("p",{staticClass:"big day"},[t._v(t._s(t.state.statusMessage))]),i("p",{staticClass:"big time"},[t._v(t._s(t.state.clock))])]),i("div",{staticClass:"side-section"},[i("div",{staticClass:"day-switchers"},[i("div",{staticClass:"day-button switchers",class:{dark:t.isDarkMode},attrs:{title:"Previous day"},on:{click:function(e){return t.dayStep(-1)}}},[i("i",{staticClass:"fa fa-1x fa-arrow-left"})]),i("div",{staticClass:"day-button switchers",class:{dark:t.isDarkMode},attrs:{title:"Next day"},on:{click:function(e){return t.dayStep(1)}}},[i("i",{staticClass:"fa fa-1x fa-arrow-right"})])]),i("div",{staticClass:"day-button-grid"},t._l(Array.from(Array(t.numDays+1).keys()).slice(1),(function(e){return i("div",{key:e,staticClass:"day-button",class:{currentday:t.newDay==e,dark:t.isDarkMode},style:{borderBottom:t.newDay==e?"none":"2px solid "+t.colorLookup(e)},attrs:{title:"Day "+e},on:{click:function(n){return t.switchDay(e)}}},[t._v(t._s(e))])})),0)]),i("div",{staticClass:"right-side"},[t.isLoaded?i("div",{staticClass:"morestuff"},[i("vue-slider",{staticClass:"speed-slider",attrs:{data:t.speedStops,duration:0,dotSize:20,tooltip:"active","tooltip-placement":"bottom","tooltip-formatter":function(t){return t+"x"}},model:{value:t.speed,callback:function(e){t.speed=e},expression:"speed"}}),i("p",{staticClass:"speed-label",style:{color:t.textColor.text}},[t._v(t._s(t.speed)+"x speed")]),i("toggle-button",{attrs:{value:t.showSusceptible,sync:!0,labels:!0,color:"#4b7cc4",speed:150},on:{change:t.toggleSusceptible}}),i("p",{staticClass:"speed-label",style:{color:t.textColor.text}},[t._v("Show susceptible")])],1):t._e()]),t.isLoaded?i("playback-controls",{staticClass:"playback-stuff",on:{click:t.toggleSimulation}}):t._e(),t.isLoaded?i("div",{staticClass:"extra-buttons"},[i("div",{staticClass:"help-button",attrs:{title:"info"},on:{click:t.clickedHelp}},[i("i",{staticClass:"help-button-text fa fa-1x fa-question"})]),i("img",{staticClass:"theme-button",attrs:{src:n("0386"),title:"dark/light theme"},on:{click:t.rotateColors}})]):t._e(),i("div",{staticClass:"legend",class:{dark:t.isDarkMode}},[i("p",{style:{color:t.isDarkMode?"#fff":"#000"}},[t._v("Legend:")]),i("div",{staticClass:"legend-items"},t._l(t.legendBits,(function(e){return i("p",{key:e.label,staticClass:"legend-item",style:{color:e.color}},[t._v(t._s(e.label))])})),0)])],1)},Ct=[],Ot=(n("ac1f"),n("5319"),n("369b")),Tt=n.n(Ot),xt=n("4971"),jt=n.n(xt),_t=n("f206"),It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"anim-container"}})},At=[],Mt=(n("4160"),n("b0c0"),n("b64b"),n("1276"),n("159b"),n("9037")),Rt=n("3bba"),Et=n("5a89"),Lt=n("2909"),Dt=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(t,i,o){var a;Object(c["a"])(this,n),a=e.call(this),a.tripsPerAgent={},a.midX=i,a.midY=o;for(var s=[],r=[],l=[],u=[],d=0,m=Object.keys(t);d<m.length;d++){var h=m[d],p=t[h];a.buildWaypoints(p,s,r,l,u)}a.setAttribute("position",new Et["f"](s,3)),a.setAttribute("position2",new Et["f"](r,3)),a.setAttribute("infectionTime",new Et["f"](l,3)),a.setAttribute("infectionStatus",new Et["f"](u,3));var f=6*s.length+6*l.length;return console.log("######## GPU RAM:",f),a}return Object(l["a"])(n,[{key:"updateInfections",value:function(t){for(var e=[],n=[],i=0,o=Object.keys(t);i<o.length;i++)for(var a=o[i],s=t[a],r=this.tripsPerAgent[s.id],c=0;c<r;c++)e.push.apply(e,Object(Lt["a"])(s.dtime)),n.push.apply(n,Object(Lt["a"])(s.d));this.setAttribute("infectionTime",new Et["f"](e,3)),this.setAttribute("infectionStatus",new Et["f"](n,3))}},{key:"buildWaypoints",value:function(t,e,i,o,a){var s=t.time.length;if(!(s<2)){var r=n.buildInfectionTimes(t),c=n.buildInfectionTypes(t),l=0;if(0!==t.time[0]){var u=t.path[0][0]-this.midX,d=t.path[0][1]-this.midY,m=t.time[0];e.push(u,d,0),i.push(u,d,m),o.push.apply(o,Object(Lt["a"])(r)),a.push.apply(a,Object(Lt["a"])(c)),l++}for(var h=0;h<s-1;h++){var p=t.path[h][0]-this.midX,f=t.path[h][1]-this.midY,v=t.time[h];e.push(p,f,v);var g=t.path[h+1][0]-this.midX,b=t.path[h+1][1]-this.midY,y=t.time[h+1];i.push(g,b,y),o.push.apply(o,Object(Lt["a"])(r)),a.push.apply(a,Object(Lt["a"])(c)),l++}if(86400!==t.time[s-1]){var k=t.path[s-1][0]-this.midX,w=t.path[s-1][1]-this.midY,S=t.time[s-1];e.push(k,w,S),i.push(k,w,86400),o.push.apply(o,Object(Lt["a"])(r)),a.push.apply(a,Object(Lt["a"])(c)),l++}this.tripsPerAgent[t.id]=l}}}],[{key:"buildInfectionTimes",value:function(t){switch(t.dtime.length){case 0:return[0,-1,-1];case 1:return[t.dtime[0],-1,-1];case 2:return[t.dtime[0],t.dtime[1],-1];case 3:default:return[t.dtime[0],t.dtime[1],t.dtime[2]]}}},{key:"buildInfectionTypes",value:function(t){switch(t.d.length){case 0:return[0,-1,-1];case 1:return[t.d[0],-1,-1];case 2:return[t.d[0],t.d[1],-1];case 3:default:return[t.d[0],t.d[1],t.d[2]]}}}]),n}(Et["b"]),Pt=Dt,Nt=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.call(this),t.SIMULATION_PERCENT="sim-percent",t.DRAG="sim-drag",t}return n}(h["c"]);Nt=Object(m["a"])([h["a"]],Nt);var zt,Bt,$t=new Nt,Ft=$t,Ht=Object(y["a"])(Ft,zt,Bt,!1,null,null,null),Yt=Ht.exports,qt=function(t){Object(u["a"])(i,t);var e=Object(d["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.timeFactor=600,t.timeDirection=1,t.vertexShader=n("d70e").default,t.fragmentShader=n("67cc").default,t.networkFilename="network.zip",t.state=T.state,t.colors=t.state.colorScheme==f.DarkMode?O:C,t.simulationTime=0,t.animationTimeSinceUnpaused=0,t.clock=new Et["c"](!1),t.nextClockUpdateTime=0,t.scene=new Et["p"],t.renderer=new Et["y"]({antialias:!0}),t.OrbitControl=n("d1f5"),t.linkMaterial=new Et["i"]({color:t.colors.links}),t.xRange=[1e25,-1e25],t.yRange=[1e25,-1e25],t.midpointX=186589,t.midpointY=668536,t.tripList={},t.infectionList={},t.allTripsHaveBegun=!1,t.publicPath="/data/tama/",t.wasSimulationRunning=!0,t.networkLayers=[],t.tempStreamBuffer="",t}return Object(l["a"])(i,[{key:"speedChanged",value:function(){this.$store.commit("setSimulation",!0);var t=this.speed<0?-1:1;t!==this.timeDirection&&(this.clock.stop(),this.clock=new Et["c"](!1),this.timeDirection=t,this.clock.start(),this.animationTimeSinceUnpaused=0,requestAnimationFrame(this.moveCameraWhilePaused),console.log("done flip"))}},{key:"playPauseSim",value:function(){this.state.isRunning?(this.clock.start(),requestAnimationFrame(this.animate)):(this.clock.stop(),this.clock=new Et["c"](!1),this.animationTimeSinceUnpaused=0,requestAnimationFrame(this.moveCameraWhilePaused))}},{key:"switchColorScheme",value:function(t){this.colors=t==f.LightMode?C:O,this.scene.background=new Et["d"](this.colors.background),this.agentMaterial&&(this.agentMaterial.uniforms["cSusceptible"].value=new Et["d"](this.colors.susceptible),this.agentMaterial.uniforms["cInfectedButNotContagious"].value=new Et["d"](this.colors.infectedButNotContagious),this.agentMaterial.uniforms["cContagious"].value=new Et["d"](this.colors.contagious),this.agentMaterial.uniforms["cSymptomatic"].value=new Et["d"](this.colors.symptomatic),this.agentMaterial.uniforms["cSeriouslyIll"].value=new Et["d"](this.colors.seriouslyIll),this.agentMaterial.uniforms["cCritical"].value=new Et["d"](this.colors.critical),this.agentMaterial.uniforms["cRecovered"].value=new Et["d"](this.colors.recovered));var e=this.scene.getObjectByName("network");e&&this.scene.remove(e),this.linkMaterial.dispose(),this.linkMaterial=new Et["i"]({color:this.colors.links});var n,i=Object(F["a"])(this.networkLayers);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.name,s=this.scene.getObjectByName(a);s&&this.scene.remove(s);var r=new Et["j"](o.geometry,this.linkMaterial);r.name=a,this.scene.add(r)}}catch(c){i.e(c)}finally{i.f()}}},{key:"dayChanged",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("------------------ DAY",this.day),this.clock.stop(),this.animationTimeSinceUnpaused=0,this.clock=new Et["c"](!1),this.updateAgentAttributesForDay(this.day);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){this.setInitialClockTime(),this.setupSimulation(),this.setupDragListener(),window.addEventListener("resize",this.onWindowResize,!1),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}},{key:"setInitialClockTime",value:function(){var t=""+this.$route.query.start;if(t&&NaN!=parseInt(t)){var e=parseInt(t);(e>=0||e<86400)&&(this.simulationTime=e,this.setVisibleClock(),this.$nextTick())}}},{key:"toggleSusceptible",value:function(){if(this.agentGeometry&&this.agentMaterial){var t=this.showSusceptible?1:0;this.agentMaterial.uniforms["showSusceptible"].value=t,this.agentMaterial.uniformsNeedUpdate=!0}}},{key:"handleVisibilityChange",value:function(){console.log("window visibility changed!! hidden:",document.hidden),this.$store.commit("setSimulation",!document.hidden)}},{key:"setupDragListener",value:function(){var t=this;Yt.$on(Yt.DRAG,(function(e){-1===e?(t.wasSimulationRunning=t.state.isRunning,t.$store.commit("setSimulation",!1)):-2===e?t.$store.commit("setSimulation",t.wasSimulationRunning):(t.simulationTime=t.nextClockUpdateTime=e,t.animate())}))}},{key:"exitSimulation",value:function(){this.clock=new Et["c"](!1),this.simulationTime=0,this.nextClockUpdateTime=0,this.timeDirection=1;while(this.scene.children.length)this.scene.remove(this.scene.children[0])}},{key:"beforeDestroy",value:function(){this.exitSimulation(),window.removeEventListener("resize",this.onWindowResize),document.removeEventListener("visibilityChange",this.handleVisibilityChange),Yt.$off(Yt.DRAG),this.agentMaterial&&this.agentMaterial.dispose(),this.agentGeometry&&this.agentGeometry.dispose();var t,e=Object(F["a"])(this.networkLayers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.geometry.dispose()}}catch(i){e.e(i)}finally{e.f()}this.linkMaterial.dispose(),this.scene.dispose()}},{key:"onWindowResize",value:function(){if(this.container=document.getElementById("anim-container"),this.container&&this.camera){this.renderer.domElement;this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)}}},{key:"setupSimulation",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.initScene(),this.$store.commit("setStatusMessage","Loading agents..."),t.next=4,this.loadTrips();case 4:this.addNetworkToScene();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"startSimulation",value:function(){this.$emit("loaded",!0),this.state.isShowingHelp||(this.clock.start(),this.animate(),this.$store.commit("setSimulation",!0))}},{key:"networkLayerAdder",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(e,n,i){var o,a,s,r,c,l,u,d,m,h,p,f,v=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=2e4,!(i>n.length)){t.next=5;break}return this.$store.commit("setStatusMessage",""),this.startSimulation(),t.abrupt("return");case 5:for(a=[],s=i,r=i+o>n.length?n.length:i+o,c=s;c<r;c++)l=n[c],u=new Et["x"](e[l.from_node].x,e[l.from_node].y,0),d=new Et["x"](e[l.to_node].x,e[l.to_node].y,0),m=(new Et["b"]).setFromPoints([u,d]),a.push(m);h=Mt["a"].mergeBufferGeometries(a),p=new Et["j"](h,this.linkMaterial),p.name="network"+i,this.scene.add(p),this.camera&&this.renderer.render(this.scene,this.camera),this.networkLayers.push(p),h.dispose(),f=i+o,setTimeout((function(){v.networkLayerAdder(e,n,f)}),1);case 18:case"end":return t.stop()}}),t,this)})));function e(e,n,i){return t.apply(this,arguments)}return e}()},{key:"addNetworkToScene",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("loading network",this.networkFilename),this.networkLayers=[],e=new Rt["a"](this.publicPath+this.networkFilename),t.next=5,e.load();case 5:n=e.extractAsJSON("network.json"),i={},o=Object(F["a"])(n.nodes);try{for(o.s();!(a=o.n()).done;)s=a.value,i[s.node_id]={x:s.x-this.midpointX,y:s.y-this.midpointY}}catch(r){o.e(r)}finally{o.f()}console.log("network has links:",n.links.length),this.networkLayerAdder(i,n.links,0);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadTrips",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("loading agent trips"),e=this.publicPath+"trips.json",console.log(e),t.next=5,fetch(e);case 5:if(n=t.sent,n.body){t.next=8;break}return t.abrupt("return");case 8:return this.tripList={},t.next=11,n.text();case 11:i=t.sent,o=Object(F["a"])(i.split("\n"));try{for(o.s();!(a=o.n()).done;)s=a.value,s&&(r=JSON.parse(s),this.tripList[r.id]=r)}catch(c){o.e(c)}finally{o.f()}console.log("--Done reading trips."),this.finishedLoadingTrips();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateAgentAttributesForDay",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("loading infections for day",e),n=("00"+this.day).slice(-3),i=this.publicPath+n+"-infections.json",console.log(i),t.next=6,fetch(i);case 6:if(o=t.sent,o.body){t.next=9;break}return t.abrupt("return");case 9:this.tempStreamBuffer="",this.infectionList={},a=new TextDecoder("utf-8"),s=o.body.getReader(),this.loopInfectionReader(s,a);case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loopInfectionReader",value:function(t,e){var n=this;t.read().then((function(i){var o=i.value,a=i.done;a?(n.tempStreamBuffer&&n.processNewlyReadInfection(n.tempStreamBuffer),console.log("--Done reading infections."),n.finishedLoadingInfections()):(n.processNDJSONInfectionChunk(o,e),n.loopInfectionReader(t,e))}))}},{key:"processNewlyReadInfection",value:function(t){var e=JSON.parse(t);this.infectionList[e.id]=e}},{key:"processNDJSONInfectionChunk",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",o=e.decode(t);this.tempStreamBuffer+=o;var a=this.tempStreamBuffer.split(i);a.slice(0,-1).forEach((function(t){n.processNewlyReadInfection(t)})),this.tempStreamBuffer=a[a.length-1]}},{key:"finishedLoadingInfections",value:function(){this.agentGeometry&&(this.agentGeometry.updateInfections(this.infectionList),this.clock.start())}},{key:"finishedLoadingTrips",value:function(){this.agentGeometry&&this.agentGeometry.dispose(),this.agentGeometry=new Pt(this.tripList,this.midpointX,this.midpointY),Object.keys(this.infectionList).length>0&&this.agentGeometry.updateInfections(this.infectionList),this.agentMaterial||(this.agentMaterial=new Et["q"]({uniforms:{simulationTime:{value:0},showSusceptible:{value:this.showSusceptible},colorLinks:{value:new Et["d"](this.colors.links)},cSusceptible:{value:new Et["d"](this.colors.susceptible)},cContagious:{value:new Et["d"](this.colors.contagious)},cInfectedButNotContagious:{value:new Et["d"](this.colors.infectedButNotContagious)},cSymptomatic:{value:new Et["d"](this.colors.symptomatic)},cSeriouslyIll:{value:new Et["d"](this.colors.seriouslyIll)},cCritical:{value:new Et["d"](this.colors.critical)},cRecovered:{value:new Et["d"](this.colors.recovered)}},vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,blending:Et["l"],depthTest:!0,transparent:!0}));var t=new Et["n"](this.agentGeometry,this.agentMaterial);t.name="agents";var e=this.scene.getObjectByName("agents");e&&this.scene.remove(e),this.scene.add(t),this.camera&&this.renderer.render(this.scene,this.camera),this.$store.commit("setStatusMessage","Loading network..."),console.log("added points")}},{key:"initScene",value:function(){if(console.log("hereee 5-----"),this.container=document.getElementById("anim-container"),this.container){console.log("hereee 0-----"),this.scene.background=new Et["d"](this.colors.background),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.container.appendChild(this.renderer.domElement);var t=1,e=1e5;this.camera=new Et["m"](170,this.container.clientWidth/this.container.clientHeight,t,e),this.cameraControls=new this.OrbitControl.MapControls(this.camera,this.renderer.domElement),this.cameraControls.enablePan=!0,this.cameraControls.screenSpacePanning=!0,this.cameraControls.enableZoom=!0,this.cameraControls.enableRotate=!1,this.camera.position.set(0,0,1500),this.camera.lookAt(0,0,-1),this.cameraControls.update(),this.renderer.render(this.scene,this.camera),console.log("--init complete!")}}},{key:"moveCameraWhilePaused",value:function(){this.camera&&(this.state.isRunning||(this.renderer.render(this.scene,this.camera),this.cameraControls.update(),requestAnimationFrame(this.moveCameraWhilePaused)))}},{key:"setVisibleClock",value:function(){var t=Math.floor(this.simulationTime/3600),e=Math.floor(this.simulationTime/60)%60;this.$store.commit("setClock",(t<10?"0":"")+t+(e<10?":0":":")+e)}},{key:"animate",value:function(){var t=this.clock.getElapsedTime(),e=this.timeFactor*this.speed*(t-this.animationTimeSinceUnpaused);this.animationTimeSinceUnpaused=t,this.simulationTime=this.simulationTime+e,this.simulationTime<0?(this.$store.commit("setSimulation",!1),this.simulationTime=0):this.simulationTime>86400&&(this.$store.commit("setSimulation",!1),this.simulationTime=86399),this.agentMaterial&&(this.agentMaterial.uniforms["simulationTime"].value=this.simulationTime),this.simulationTime*this.timeDirection>=this.nextClockUpdateTime*this.timeDirection&&(this.setVisibleClock(),this.nextClockUpdateTime+=60*this.timeDirection,Yt.$emit(Yt.SIMULATION_PERCENT,this.simulationTime/86400)),this.camera&&this.renderer.render(this.scene,this.camera),this.cameraControls.update(),this.state.isRunning&&requestAnimationFrame(this.animate)}}]),i}(h["c"]);Object(m["a"])([Object(h["b"])({required:!0})],qt.prototype,"speed",void 0),Object(m["a"])([Object(h["b"])({required:!0})],qt.prototype,"day",void 0),Object(m["a"])([Object(h["b"])({required:!0})],qt.prototype,"showSusceptible",void 0),Object(m["a"])([Object(h["d"])("speed")],qt.prototype,"speedChanged",null),Object(m["a"])([Object(h["d"])("state.isRunning")],qt.prototype,"playPauseSim",null),Object(m["a"])([Object(h["d"])("state.colorScheme")],qt.prototype,"switchColorScheme",null),Object(m["a"])([Object(h["d"])("day")],qt.prototype,"dayChanged",null),Object(m["a"])([Object(h["d"])("showSusceptible")],qt.prototype,"toggleSusceptible",null),qt=Object(m["a"])([h["a"]],qt);var Ut=qt,Gt=Ut,Vt=(n("1eaf"),Object(y["a"])(Gt,It,At,!1,null,"515f76cc",null)),Xt=Vt.exports,Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"vue-component"}},[n("vue-slider",t._b({staticClass:"slider",on:{dragging:t.dragging,"drag-start":t.dragStart,"drag-end":t.dragEnd},model:{value:t.sliderValue,callback:function(e){t.sliderValue=e},expression:"sliderValue"}},"vue-slider",t.sliderOptions,!1)),n("div",{staticClass:"buttons"},[n("div",{staticClass:"playpause",on:{click:t.toggleSimulation}},[t.state.isRunning?n("i",{staticClass:"button-icon fa fa-1x fa-pause"}):n("i",{staticClass:"button-icon fa fa-1x fa-play"})])])],1)},Zt=[],Jt=(n("99af"),n("3c87")),Kt=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.state=T.state,t.sliderValue=0,t.maxSliderVal=1e5,t.sliderOptions={min:0,max:t.maxSliderVal-1,clickable:!1,dotSize:20,duration:0,lazy:!0,tooltip:"active","tooltip-placement":"top","tooltip-formatter":function(e){return t.convertSecondsToClockTimeMinutes(e)}},t}return Object(l["a"])(n,[{key:"toggleSimulation",value:function(){this.$emit("click")}},{key:"convertSecondsToClockTimeMinutes",value:function(t){var e=this.getSecondsFromSlider(t);try{var n=Jt(e),i=("00"+n.minutes).slice(-2);return"".concat(n.hours,":").concat(i)}catch(o){return"00:00"}}},{key:"dragStart",value:function(){console.log("start"),Yt.$emit(Yt.DRAG,-1)}},{key:"dragEnd",value:function(){console.log("end"),Yt.$emit(Yt.DRAG,-2)}},{key:"dragging",value:function(t){Yt.$emit(Yt.DRAG,this.getSecondsFromSlider(t))}},{key:"onKeyPressed",value:function(t){"Space"===t.code&&this.toggleSimulation()}},{key:"getSecondsFromSlider",value:function(t){var e=t/this.maxSliderVal*86400;return 86400===e&&(e=86399),e}},{key:"mounted",value:function(){var t=this;Yt.$on(Yt.SIMULATION_PERCENT,(function(e){t.sliderValue=Math.floor(t.maxSliderVal*e)})),window.addEventListener("keyup",this.onKeyPressed)}},{key:"beforeDestroy",value:function(){Yt.$off(Yt.SIMULATION_PERCENT),window.removeEventListener("keyup",this.onKeyPressed)}}]),n}(h["c"]);Kt=Object(m["a"])([Object(h["a"])({components:{VueSlider:jt.a},props:{}})],Kt);var Qt=Kt,te=Qt,ee=(n("3b17"),Object(y["a"])(te,Wt,Zt,!1,null,"c89e86a2",null)),ne=ee.exports,ie=function(t){Object(u["a"])(i,t);var e=Object(d["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.numDays=90,t.newDay=0,t.state=T.state,t.isDarkMode=t.state.colorScheme===f.DarkMode,t.isLoaded=!1,t.showHelp=!1,t.showSusceptible=!0,t.totalInfections=n("234c").default,t.speedStops=[-10,-5,-2,-1,-.5,-.25,0,.25,.5,1,2,5,10],t.speed=1,t.legendBits=[],t.dayColors={},t}return Object(l["a"])(i,[{key:"swapTheme",value:function(){this.isDarkMode=this.state.colorScheme===f.DarkMode,this.updateLegendColors(),this.setCubeColors()}},{key:"updateLegendColors",value:function(){var t=this.state.colorScheme==f.LightMode?C:O;this.legendBits=[{label:"susceptible",color:t.susceptible},{label:"latently infected",color:t.infectedButNotContagious},{label:"contagious",color:t.contagious},{label:"symptomatic",color:t.symptomatic},{label:"seriously ill",color:t.seriouslyIll},{label:"critical",color:t.critical},{label:"recovered",color:t.recovered}]}},{key:"setInitialDay",value:function(){var t=""+this.$route.query.day;if(t&&NaN!=parseInt(t)){var e=parseInt(t);(e>=1||e<this.numDays)&&(this.newDay=e,this.$nextTick())}}},{key:"toggleSimulation",value:function(){this.$store.commit("setSimulation",!this.state.isRunning),this.state.isRunning&&0===this.speed&&(this.speed=1)}},{key:"mounted",value:function(){this.$store.commit("setFullScreen",!0),this.showHelp=!this.state.sawAgentAnimationHelp,this.$store.commit("setShowingHelp",this.showHelp),this.$store.commit("setSimulation",!this.showHelp),this.setInitialDay(),this.setCubeColors(),this.updateLegendColors()}},{key:"beforeDestroy",value:function(){this.$store.commit("setFullScreen",!1),this.$store.commit("setSimulation",!1)}},{key:"setCubeColors",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=["nInfectedButNotContagious","nContagious","nShowingSymptoms","nSeriouslySick","nCritical","nRecovered"],n=this.state.colorScheme==f.LightMode?C:O,Tt.a.parse(this.totalInfections,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:function(t){i.dayColors[0]=n.infectedButNotContagious;var o,a=Object(F["a"])(t.data);try{for(a.s();!(o=a.n()).done;){var s,r=o.value,c=0,l="nix",u=Object(F["a"])(e);try{for(u.s();!(s=u.n()).done;){var d=s.value;r[d]>c&&(c=r[d],l=d)}}catch(h){u.e(h)}finally{u.f()}var m=r.day;switch(l){case"nSusceptible":i.dayColors[m]=n.susceptible;break;case"nInfectedButNotContagious":i.dayColors[m]=n.infectedButNotContagious;break;case"nContagious":i.dayColors[m]=n.contagious;break;case"nShowingSymptoms":i.dayColors[m]=n.symptomatic;break;case"nSeriouslySick":i.dayColors[m]=n.seriouslyIll;break;case"nCritical":i.dayColors[m]=n.critical;break;case"nRecovered":i.dayColors[m]=n.recovered;break;default:i.dayColors[m]="#dddddd";break}}}catch(h){a.e(h)}finally{a.f()}}});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"colorLookup",value:function(t){return this.dayColors[t]}},{key:"clickedHelp",value:function(){console.log("HEEELP!"),this.$store.commit("setSimulation",!1),this.showHelp=!0,this.$store.commit("setShowingHelp",this.showHelp)}},{key:"clickedCloseHelp",value:function(){this.showHelp=!1,this.$store.commit("setShowingHelp",this.showHelp),this.$store.commit("setSawAgentAnimationHelp",!0),this.$store.commit("setSimulation",!0)}},{key:"toggleSusceptible",value:function(){this.showSusceptible=!this.showSusceptible}},{key:"switchDay",value:function(t){var e=""+(t+0);this.$router.replace({query:{day:e}}),this.$nextTick(),this.newDay=t}},{key:"dayStep",value:function(t){var e=this.newDay+t;e<0||e>=this.numDays||this.switchDay(e)}},{key:"toggleLoaded",value:function(t){this.isLoaded=t}},{key:"rotateColors",value:function(){this.$store.commit("rotateColors")}},{key:"textColor",get:function(){var t={text:"#3498db",bg:"#eeeef480"},e={text:"white",bg:"#181518aa"};return this.state.colorScheme===f.DarkMode?e:t}}]),i}(h["c"]);Object(m["a"])([Object(h["d"])("state.colorScheme")],ie.prototype,"swapTheme",null),ie=Object(m["a"])([Object(h["a"])({components:{AnimationView:Xt,PlaybackControls:ne,VueSlider:jt.a,ToggleButton:_t["ToggleButton"]}})],ie);var oe=ie,ae=oe,se=(n("40f5"),Object(y["a"])(ae,St,Ct,!1,null,"c50ab160",null)),re=se.exports,ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"v3-app"}},[i("animation-view",{staticClass:"anim",attrs:{speed:t.speed,day:t.newDay,showSusceptible:t.showSusceptible},on:{loaded:t.toggleLoaded}}),i("div",{staticClass:"nav"},[t.state.statusMessage?t._e():i("p",{staticClass:"big time"},[t._v("Jerusalem Metropolitan Area: Outbreak Day "+t._s(t.newDay))]),i("p",{staticClass:"big day"},[t._v(t._s(t.state.statusMessage))]),i("p",{staticClass:"big time"},[t._v(t._s(t.state.clock))])]),i("div",{staticClass:"side-section"},[i("div",{staticClass:"day-switchers"},[i("div",{staticClass:"day-button switchers",class:{dark:t.isDarkMode},attrs:{title:"Previous day"},on:{click:function(e){return t.dayStep(-1)}}},[i("i",{staticClass:"fa fa-1x fa-arrow-left"})]),i("div",{staticClass:"day-button switchers",class:{dark:t.isDarkMode},attrs:{title:"Next day"},on:{click:function(e){return t.dayStep(1)}}},[i("i",{staticClass:"fa fa-1x fa-arrow-right"})])]),i("div",{staticClass:"day-button-grid"},t._l(Array.from(Array(t.numDays+1).keys()).slice(1),(function(e){return i("div",{key:e,staticClass:"day-button",class:{currentday:t.newDay==e,dark:t.isDarkMode},style:{borderBottom:t.newDay==e?"none":"2px solid "+t.colorLookup(e)},attrs:{title:"Day "+e},on:{click:function(n){return t.switchDay(e)}}},[t._v(t._s(e))])})),0)]),i("div",{staticClass:"right-side"},[t.isLoaded?i("div",{staticClass:"morestuff"},[i("vue-slider",{staticClass:"speed-slider",attrs:{data:t.speedStops,duration:0,dotSize:20,tooltip:"active","tooltip-placement":"bottom","tooltip-formatter":function(t){return t+"x"}},model:{value:t.speed,callback:function(e){t.speed=e},expression:"speed"}}),i("p",{staticClass:"speed-label",style:{color:t.textColor.text}},[t._v(t._s(t.speed)+"x speed")]),i("toggle-button",{attrs:{value:t.showSusceptible,sync:!0,labels:!0,color:"#4b7cc4",speed:150},on:{change:t.toggleSusceptible}}),i("p",{staticClass:"speed-label",style:{color:t.textColor.text}},[t._v("Show susceptible")])],1):t._e()]),t.isLoaded?i("playback-controls",{staticClass:"playback-stuff",on:{click:t.toggleSimulation}}):t._e(),t.isLoaded?i("div",{staticClass:"extra-buttons"},[i("div",{staticClass:"help-button",attrs:{title:"info"},on:{click:t.clickedHelp}},[i("i",{staticClass:"help-button-text fa fa-1x fa-question"})]),i("img",{staticClass:"theme-button",attrs:{src:n("0386"),title:"dark/light theme"},on:{click:t.rotateColors}})]):t._e(),i("div",{staticClass:"legend",class:{dark:t.isDarkMode}},[i("p",{style:{color:t.isDarkMode?"#fff":"#000"}},[t._v("Legend:")]),i("div",{staticClass:"legend-items"},t._l(t.legendBits,(function(e){return i("p",{key:e.label,staticClass:"legend-item",style:{color:e.color}},[t._v(t._s(e.label))])})),0)])],1)},le=[],ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"anim-container"}})},de=[],me=function(t){Object(u["a"])(n,t);var e=Object(d["a"])(n);function n(t,i,o){var a;Object(c["a"])(this,n),a=e.call(this),a.tripsPerAgent={},a.midX=i,a.midY=o;for(var s=[],r=[],l=[],u=[],d=0,m=Object.keys(t);d<m.length;d++){var h=m[d],p=t[h];a.buildWaypoints(p,s,r,l,u)}a.setAttribute("position",new Et["f"](s,3)),a.setAttribute("position2",new Et["f"](r,3)),a.setAttribute("infectionTime",new Et["f"](l,3)),a.setAttribute("infectionStatus",new Et["f"](u,3));var f=6*s.length+6*l.length;return console.log("######## GPU RAM:",f),a}return Object(l["a"])(n,[{key:"updateInfections",value:function(t){for(var e=[],n=[],i=0,o=Object.keys(t);i<o.length;i++)for(var a=o[i],s=t[a],r=this.tripsPerAgent[s.id],c=0;c<r;c++)e.push.apply(e,Object(Lt["a"])(s.dtime)),n.push.apply(n,Object(Lt["a"])(s.d));this.setAttribute("infectionTime",new Et["f"](e,3)),this.setAttribute("infectionStatus",new Et["f"](n,3))}},{key:"buildWaypoints",value:function(t,e,i,o,a){var s=t.time.length;if(!(s<2)){var r=n.buildInfectionTimes(t),c=n.buildInfectionTypes(t),l=0;if(0!==t.time[0]){var u=t.path[0][0]-this.midX,d=t.path[0][1]-this.midY,m=t.time[0];e.push(u,d,0),i.push(u,d,m),o.push.apply(o,Object(Lt["a"])(r)),a.push.apply(a,Object(Lt["a"])(c)),l++}for(var h=0;h<s-1;h++){var p=t.path[h][0]-this.midX,f=t.path[h][1]-this.midY,v=t.time[h];e.push(p,f,v);var g=t.path[h+1][0]-this.midX,b=t.path[h+1][1]-this.midY,y=t.time[h+1];i.push(g,b,y),o.push.apply(o,Object(Lt["a"])(r)),a.push.apply(a,Object(Lt["a"])(c)),l++}if(86400!==t.time[s-1]){var k=t.path[s-1][0]-this.midX,w=t.path[s-1][1]-this.midY,S=t.time[s-1];e.push(k,w,S),i.push(k,w,86400),o.push.apply(o,Object(Lt["a"])(r)),a.push.apply(a,Object(Lt["a"])(c)),l++}this.tripsPerAgent[t.id]=l}}}],[{key:"buildInfectionTimes",value:function(t){switch(t.dtime.length){case 0:return[0,-1,-1];case 1:return[t.dtime[0],-1,-1];case 2:return[t.dtime[0],t.dtime[1],-1];case 3:default:return[t.dtime[0],t.dtime[1],t.dtime[2]]}}},{key:"buildInfectionTypes",value:function(t){switch(t.d.length){case 0:return[0,-1,-1];case 1:return[t.d[0],-1,-1];case 2:return[t.d[0],t.d[1],-1];case 3:default:return[t.d[0],t.d[1],t.d[2]]}}}]),n}(Et["b"]),he=me,pe=function(t){Object(u["a"])(i,t);var e=Object(d["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.timeFactor=600,t.timeDirection=1,t.vertexShader=n("fafd").default,t.fragmentShader=n("9a44").default,t.networkFilename="network.zip",t.state=T.state,t.colors=t.state.colorScheme==f.DarkMode?O:C,t.simulationTime=0,t.animationTimeSinceUnpaused=0,t.clock=new Et["c"](!1),t.nextClockUpdateTime=0,t.scene=new Et["p"],t.renderer=new Et["y"]({antialias:!0}),t.OrbitControl=n("d1f5"),t.linkMaterial=new Et["i"]({color:t.colors.links}),t.xRange=[1e25,-1e25],t.yRange=[1e25,-1e25],t.midpointX=222286,t.midpointY=631556,t.tripList={},t.infectionList={},t.allTripsHaveBegun=!1,t.publicPath="/data/jlm/",t.wasSimulationRunning=!0,t.networkLayers=[],t.tempStreamBuffer="",t}return Object(l["a"])(i,[{key:"speedChanged",value:function(){this.$store.commit("setSimulation",!0);var t=this.speed<0?-1:1;t!==this.timeDirection&&(this.clock.stop(),this.clock=new Et["c"](!1),this.timeDirection=t,this.clock.start(),this.animationTimeSinceUnpaused=0,requestAnimationFrame(this.moveCameraWhilePaused),console.log("done flip"))}},{key:"playPauseSim",value:function(){this.state.isRunning?(this.clock.start(),requestAnimationFrame(this.animate)):(this.clock.stop(),this.clock=new Et["c"](!1),this.animationTimeSinceUnpaused=0,requestAnimationFrame(this.moveCameraWhilePaused))}},{key:"switchColorScheme",value:function(t){this.colors=t==f.LightMode?C:O,this.scene.background=new Et["d"](this.colors.background),this.agentMaterial&&(this.agentMaterial.uniforms["cSusceptible"].value=new Et["d"](this.colors.susceptible),this.agentMaterial.uniforms["cInfectedButNotContagious"].value=new Et["d"](this.colors.infectedButNotContagious),this.agentMaterial.uniforms["cContagious"].value=new Et["d"](this.colors.contagious),this.agentMaterial.uniforms["cSymptomatic"].value=new Et["d"](this.colors.symptomatic),this.agentMaterial.uniforms["cSeriouslyIll"].value=new Et["d"](this.colors.seriouslyIll),this.agentMaterial.uniforms["cCritical"].value=new Et["d"](this.colors.critical),this.agentMaterial.uniforms["cRecovered"].value=new Et["d"](this.colors.recovered));var e=this.scene.getObjectByName("network");e&&this.scene.remove(e),this.linkMaterial.dispose(),this.linkMaterial=new Et["i"]({color:this.colors.links});var n,i=Object(F["a"])(this.networkLayers);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.name,s=this.scene.getObjectByName(a);s&&this.scene.remove(s);var r=new Et["j"](o.geometry,this.linkMaterial);r.name=a,this.scene.add(r)}}catch(c){i.e(c)}finally{i.f()}}},{key:"dayChanged",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("------------------ DAY",this.day),this.clock.stop(),this.animationTimeSinceUnpaused=0,this.clock=new Et["c"](!1),this.updateAgentAttributesForDay(this.day);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){this.setInitialClockTime(),this.setupSimulation(),this.setupDragListener(),window.addEventListener("resize",this.onWindowResize,!1),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}},{key:"setInitialClockTime",value:function(){var t=""+this.$route.query.start;if(t&&NaN!=parseInt(t)){var e=parseInt(t);(e>=0||e<86400)&&(this.simulationTime=e,this.setVisibleClock(),this.$nextTick())}}},{key:"toggleSusceptible",value:function(){if(this.agentGeometry&&this.agentMaterial){var t=this.showSusceptible?1:0;this.agentMaterial.uniforms["showSusceptible"].value=t,this.agentMaterial.uniformsNeedUpdate=!0}}},{key:"handleVisibilityChange",value:function(){console.log("window visibility changed!! hidden:",document.hidden),this.$store.commit("setSimulation",!document.hidden)}},{key:"setupDragListener",value:function(){var t=this;Yt.$on(Yt.DRAG,(function(e){-1===e?(t.wasSimulationRunning=t.state.isRunning,t.$store.commit("setSimulation",!1)):-2===e?t.$store.commit("setSimulation",t.wasSimulationRunning):(t.simulationTime=t.nextClockUpdateTime=e,t.animate())}))}},{key:"exitSimulation",value:function(){this.clock=new Et["c"](!1),this.simulationTime=0,this.nextClockUpdateTime=0,this.timeDirection=1;while(this.scene.children.length)this.scene.remove(this.scene.children[0])}},{key:"beforeDestroy",value:function(){this.exitSimulation(),window.removeEventListener("resize",this.onWindowResize),document.removeEventListener("visibilityChange",this.handleVisibilityChange),Yt.$off(Yt.DRAG),this.agentMaterial&&this.agentMaterial.dispose(),this.agentGeometry&&this.agentGeometry.dispose();var t,e=Object(F["a"])(this.networkLayers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.geometry.dispose()}}catch(i){e.e(i)}finally{e.f()}this.linkMaterial.dispose(),this.scene.dispose()}},{key:"onWindowResize",value:function(){if(this.container=document.getElementById("anim-container"),this.container&&this.camera){this.renderer.domElement;this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)}}},{key:"setupSimulation",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.initScene(),this.$store.commit("setStatusMessage","Loading agents..."),t.next=4,this.loadTrips();case 4:this.addNetworkToScene();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"startSimulation",value:function(){this.$emit("loaded",!0),this.state.isShowingHelp||(this.clock.start(),this.animate(),this.$store.commit("setSimulation",!0))}},{key:"networkLayerAdder",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(e,n,i){var o,a,s,r,c,l,u,d,m,h,p,f,v=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=2e4,!(i>n.length)){t.next=5;break}return this.$store.commit("setStatusMessage",""),this.startSimulation(),t.abrupt("return");case 5:for(a=[],s=i,r=i+o>n.length?n.length:i+o,c=s;c<r;c++)l=n[c],u=new Et["x"](e[l.from_node].x,e[l.from_node].y,0),d=new Et["x"](e[l.to_node].x,e[l.to_node].y,0),m=(new Et["b"]).setFromPoints([u,d]),a.push(m);h=Mt["a"].mergeBufferGeometries(a),p=new Et["j"](h,this.linkMaterial),p.name="network"+i,this.scene.add(p),this.camera&&this.renderer.render(this.scene,this.camera),this.networkLayers.push(p),h.dispose(),f=i+o,setTimeout((function(){v.networkLayerAdder(e,n,f)}),1);case 18:case"end":return t.stop()}}),t,this)})));function e(e,n,i){return t.apply(this,arguments)}return e}()},{key:"addNetworkToScene",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("loading network",this.networkFilename),this.networkLayers=[],e=new Rt["a"](this.publicPath+this.networkFilename),t.next=5,e.load();case 5:n=e.extractAsJSON("network.json"),i={},o=Object(F["a"])(n.nodes);try{for(o.s();!(a=o.n()).done;)s=a.value,i[s.node_id]={x:s.x-this.midpointX,y:s.y-this.midpointY}}catch(r){o.e(r)}finally{o.f()}console.log("network has links:",n.links.length),this.networkLayerAdder(i,n.links,0);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadTrips",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("loading agent trips"),e=this.publicPath+"trips.json",console.log(e),t.next=5,fetch(e);case 5:if(n=t.sent,n.body){t.next=8;break}return t.abrupt("return");case 8:return this.tripList={},t.next=11,n.text();case 11:i=t.sent,o=Object(F["a"])(i.split("\n"));try{for(o.s();!(a=o.n()).done;)s=a.value,s&&(r=JSON.parse(s),this.tripList[r.id]=r)}catch(c){o.e(c)}finally{o.f()}console.log("--Done reading trips."),this.finishedLoadingTrips();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateAgentAttributesForDay",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("loading infections for day",e),n=("00"+this.day).slice(-3),i=this.publicPath+n+"-infections.json",console.log(i),t.next=6,fetch(i);case 6:if(o=t.sent,o.body){t.next=9;break}return t.abrupt("return");case 9:this.tempStreamBuffer="",this.infectionList={},a=new TextDecoder("utf-8"),s=o.body.getReader(),this.loopInfectionReader(s,a);case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loopInfectionReader",value:function(t,e){var n=this;t.read().then((function(i){var o=i.value,a=i.done;a?(n.tempStreamBuffer&&n.processNewlyReadInfection(n.tempStreamBuffer),console.log("--Done reading infections."),n.finishedLoadingInfections()):(n.processNDJSONInfectionChunk(o,e),n.loopInfectionReader(t,e))}))}},{key:"processNewlyReadInfection",value:function(t){var e=JSON.parse(t);this.infectionList[e.id]=e}},{key:"processNDJSONInfectionChunk",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",o=e.decode(t);this.tempStreamBuffer+=o;var a=this.tempStreamBuffer.split(i);a.slice(0,-1).forEach((function(t){n.processNewlyReadInfection(t)})),this.tempStreamBuffer=a[a.length-1]}},{key:"finishedLoadingInfections",value:function(){this.agentGeometry&&(this.agentGeometry.updateInfections(this.infectionList),this.clock.start())}},{key:"finishedLoadingTrips",value:function(){this.agentGeometry&&this.agentGeometry.dispose(),this.agentGeometry=new he(this.tripList,this.midpointX,this.midpointY),Object.keys(this.infectionList).length>0&&this.agentGeometry.updateInfections(this.infectionList),this.agentMaterial||(this.agentMaterial=new Et["q"]({uniforms:{simulationTime:{value:0},showSusceptible:{value:this.showSusceptible},colorLinks:{value:new Et["d"](this.colors.links)},cSusceptible:{value:new Et["d"](this.colors.susceptible)},cContagious:{value:new Et["d"](this.colors.contagious)},cInfectedButNotContagious:{value:new Et["d"](this.colors.infectedButNotContagious)},cSymptomatic:{value:new Et["d"](this.colors.symptomatic)},cSeriouslyIll:{value:new Et["d"](this.colors.seriouslyIll)},cCritical:{value:new Et["d"](this.colors.critical)},cRecovered:{value:new Et["d"](this.colors.recovered)}},vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,blending:Et["l"],depthTest:!0,transparent:!0}));var t=new Et["n"](this.agentGeometry,this.agentMaterial);t.name="agents";var e=this.scene.getObjectByName("agents");e&&this.scene.remove(e),this.scene.add(t),this.camera&&this.renderer.render(this.scene,this.camera),this.$store.commit("setStatusMessage","Loading network..."),console.log("added points")}},{key:"initScene",value:function(){if(console.log("hereee 5-----"),this.container=document.getElementById("anim-container"),this.container){console.log("hereee 0-----"),this.scene.background=new Et["d"](this.colors.background),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.container.appendChild(this.renderer.domElement);var t=1,e=1e5;this.camera=new Et["m"](170,this.container.clientWidth/this.container.clientHeight,t,e),this.cameraControls=new this.OrbitControl.MapControls(this.camera,this.renderer.domElement),this.cameraControls.enablePan=!0,this.cameraControls.screenSpacePanning=!0,this.cameraControls.enableZoom=!0,this.cameraControls.enableRotate=!1,this.camera.position.set(0,0,1500),this.camera.lookAt(0,0,-1),this.cameraControls.update(),this.renderer.render(this.scene,this.camera),console.log("--init complete!")}}},{key:"moveCameraWhilePaused",value:function(){this.camera&&(this.state.isRunning||(this.renderer.render(this.scene,this.camera),this.cameraControls.update(),requestAnimationFrame(this.moveCameraWhilePaused)))}},{key:"setVisibleClock",value:function(){var t=Math.floor(this.simulationTime/3600),e=Math.floor(this.simulationTime/60)%60;this.$store.commit("setClock",(t<10?"0":"")+t+(e<10?":0":":")+e)}},{key:"animate",value:function(){var t=this.clock.getElapsedTime(),e=this.timeFactor*this.speed*(t-this.animationTimeSinceUnpaused);this.animationTimeSinceUnpaused=t,this.simulationTime=this.simulationTime+e,this.simulationTime<0?(this.$store.commit("setSimulation",!1),this.simulationTime=0):this.simulationTime>86400&&(this.$store.commit("setSimulation",!1),this.simulationTime=86399),this.agentMaterial&&(this.agentMaterial.uniforms["simulationTime"].value=this.simulationTime),this.simulationTime*this.timeDirection>=this.nextClockUpdateTime*this.timeDirection&&(this.setVisibleClock(),this.nextClockUpdateTime+=60*this.timeDirection,Yt.$emit(Yt.SIMULATION_PERCENT,this.simulationTime/86400)),this.camera&&this.renderer.render(this.scene,this.camera),this.cameraControls.update(),this.state.isRunning&&requestAnimationFrame(this.animate)}}]),i}(h["c"]);Object(m["a"])([Object(h["b"])({required:!0})],pe.prototype,"speed",void 0),Object(m["a"])([Object(h["b"])({required:!0})],pe.prototype,"day",void 0),Object(m["a"])([Object(h["b"])({required:!0})],pe.prototype,"showSusceptible",void 0),Object(m["a"])([Object(h["d"])("speed")],pe.prototype,"speedChanged",null),Object(m["a"])([Object(h["d"])("state.isRunning")],pe.prototype,"playPauseSim",null),Object(m["a"])([Object(h["d"])("state.colorScheme")],pe.prototype,"switchColorScheme",null),Object(m["a"])([Object(h["d"])("day")],pe.prototype,"dayChanged",null),Object(m["a"])([Object(h["d"])("showSusceptible")],pe.prototype,"toggleSusceptible",null),pe=Object(m["a"])([h["a"]],pe);var fe=pe,ve=fe,ge=(n("d7ce"),Object(y["a"])(ve,ue,de,!1,null,"5b427583",null)),be=ge.exports,ye=function(t){Object(u["a"])(i,t);var e=Object(d["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.numDays=90,t.newDay=0,t.state=T.state,t.isDarkMode=t.state.colorScheme===f.DarkMode,t.isLoaded=!1,t.showHelp=!1,t.showSusceptible=!0,t.totalInfections=n("ef04").default,t.speedStops=[-10,-5,-2,-1,-.5,-.25,0,.25,.5,1,2,5,10],t.speed=1,t.legendBits=[],t.dayColors={},t}return Object(l["a"])(i,[{key:"swapTheme",value:function(){this.isDarkMode=this.state.colorScheme===f.DarkMode,this.updateLegendColors(),this.setCubeColors()}},{key:"updateLegendColors",value:function(){var t=this.state.colorScheme==f.LightMode?C:O;this.legendBits=[{label:"susceptible",color:t.susceptible},{label:"latently infected",color:t.infectedButNotContagious},{label:"contagious",color:t.contagious},{label:"symptomatic",color:t.symptomatic},{label:"seriously ill",color:t.seriouslyIll},{label:"critical",color:t.critical},{label:"recovered",color:t.recovered}]}},{key:"setInitialDay",value:function(){var t=""+this.$route.query.day;if(t&&NaN!=parseInt(t)){var e=parseInt(t);(e>=1||e<this.numDays)&&(this.newDay=e,this.$nextTick())}}},{key:"toggleSimulation",value:function(){this.$store.commit("setSimulation",!this.state.isRunning),this.state.isRunning&&0===this.speed&&(this.speed=1)}},{key:"mounted",value:function(){this.$store.commit("setFullScreen",!0),this.showHelp=!this.state.sawAgentAnimationHelp,this.$store.commit("setShowingHelp",this.showHelp),this.$store.commit("setSimulation",!this.showHelp),this.setInitialDay(),this.setCubeColors(),this.updateLegendColors()}},{key:"beforeDestroy",value:function(){this.$store.commit("setFullScreen",!1),this.$store.commit("setSimulation",!1)}},{key:"setCubeColors",value:function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=["nInfectedButNotContagious","nContagious","nShowingSymptoms","nSeriouslySick","nCritical","nRecovered"],n=this.state.colorScheme==f.LightMode?C:O,Tt.a.parse(this.totalInfections,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:function(t){i.dayColors[0]=n.infectedButNotContagious;var o,a=Object(F["a"])(t.data);try{for(a.s();!(o=a.n()).done;){var s,r=o.value,c=0,l="nix",u=Object(F["a"])(e);try{for(u.s();!(s=u.n()).done;){var d=s.value;r[d]>c&&(c=r[d],l=d)}}catch(h){u.e(h)}finally{u.f()}var m=r.day;switch(l){case"nSusceptible":i.dayColors[m]=n.susceptible;break;case"nInfectedButNotContagious":i.dayColors[m]=n.infectedButNotContagious;break;case"nContagious":i.dayColors[m]=n.contagious;break;case"nShowingSymptoms":i.dayColors[m]=n.symptomatic;break;case"nSeriouslySick":i.dayColors[m]=n.seriouslyIll;break;case"nCritical":i.dayColors[m]=n.critical;break;case"nRecovered":i.dayColors[m]=n.recovered;break;default:i.dayColors[m]="#dddddd";break}}}catch(h){a.e(h)}finally{a.f()}}});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"colorLookup",value:function(t){return this.dayColors[t]}},{key:"clickedHelp",value:function(){console.log("HEEELP!"),this.$store.commit("setSimulation",!1),this.showHelp=!0,this.$store.commit("setShowingHelp",this.showHelp)}},{key:"clickedCloseHelp",value:function(){this.showHelp=!1,this.$store.commit("setShowingHelp",this.showHelp),this.$store.commit("setSawAgentAnimationHelp",!0),this.$store.commit("setSimulation",!0)}},{key:"toggleSusceptible",value:function(){this.showSusceptible=!this.showSusceptible}},{key:"switchDay",value:function(t){var e=""+(t+0);this.$router.replace({query:{day:e}}),this.$nextTick(),this.newDay=t}},{key:"dayStep",value:function(t){var e=this.newDay+t;e<0||e>=this.numDays||this.switchDay(e)}},{key:"toggleLoaded",value:function(t){this.isLoaded=t}},{key:"rotateColors",value:function(){this.$store.commit("rotateColors")}},{key:"textColor",get:function(){var t={text:"#3498db",bg:"#eeeef480"},e={text:"white",bg:"#181518aa"};return this.state.colorScheme===f.DarkMode?e:t}}]),i}(h["c"]);Object(m["a"])([Object(h["d"])("state.colorScheme")],ye.prototype,"swapTheme",null),ye=Object(m["a"])([Object(h["a"])({components:{AnimationView:be,PlaybackControls:ne,VueSlider:jt.a,ToggleButton:_t["ToggleButton"]}})],ye);var ke=ye,we=ke,Se=(n("338b"),Object(y["a"])(we,ce,le,!1,null,"34d0f4bc",null)),Ce=Se.exports;i["default"].use(A["a"]);var Oe=[{path:"/",name:"Home",component:rt},{path:"/tama",name:"TAMA Simulation",component:re},{path:"/jlm",name:"JLM Simulation",component:Ce},{path:"/credits",name:"Credits",component:pt},{path:"/norun",name:"norun",component:wt},{path:"*",redirect:"/"}],Te=new A["a"]({mode:"history",base:"/geosimlab-episim/",routes:Oe,scrollBehavior:function(t,e,n){return n||{x:0,y:0}}}),xe=Te;i["default"].config.productionTip=!1,new i["default"]({router:xe,store:T,render:function(t){return t(I)}}).$mount("#app")},d1f5:function(t,e,n){"use strict";n.r(e),n.d(e,"OrbitControls",(function(){return o})),n.d(e,"MapControls",(function(){return a}));n("d3b7"),n("4c53"),n("ddb0");var i=n("5a89"),o=function(t,e){void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new i["x"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i["k"].PAN,MIDDLE:i["k"].DOLLY,RIGHT:i["k"].PAN},this.touches={ONE:i["s"].PAN,TWO:i["s"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),c=r.NONE},this.update=function(){var e=new i["x"],a=(new i["o"]).setFromUnitVectors(t.up,new i["x"](0,1,0)),s=a.clone().inverse(),f=new i["x"],v=new i["o"];return function(){var t=n.object.position;return e.copy(t).sub(n.target),e.applyQuaternion(a),u.setFromVector3(e),n.autoRotate&&c===r.NONE&&x(O()),n.enableDamping?(u.theta+=d.theta*n.dampingFactor,u.phi+=d.phi*n.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi),u.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=m,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),e.setFromSpherical(u),e.applyQuaternion(s),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),h.set(0,0,0)),m=1,!!(p||f.distanceToSquared(n.object.position)>l||8*(1-v.dot(n.object.quaternion))>l)&&(n.dispatchEvent(o),f.copy(n.object.position),v.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",rt,!1),n.domElement.removeEventListener("mousedown",Q,!1),n.domElement.removeEventListener("wheel",nt,!1),n.domElement.removeEventListener("touchstart",ot,!1),n.domElement.removeEventListener("touchend",st,!1),n.domElement.removeEventListener("touchmove",at,!1),document.removeEventListener("mousemove",tt,!1),document.removeEventListener("mouseup",et,!1),n.domElement.removeEventListener("keydown",it,!1)};var n=this,o={type:"change"},a={type:"start"},s={type:"end"},r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=r.NONE,l=1e-6,u=new i["r"],d=new i["r"],m=1,h=new i["x"],p=!1,f=new i["w"],v=new i["w"],g=new i["w"],b=new i["w"],y=new i["w"],k=new i["w"],w=new i["w"],S=new i["w"],C=new i["w"];function O(){return 2*Math.PI/60/60*n.autoRotateSpeed}function T(){return Math.pow(.95,n.zoomSpeed)}function x(t){d.theta-=t}function j(t){d.phi-=t}var _=function(){var t=new i["x"];return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),h.add(t)}}(),I=function(){var t=new i["x"];return function(e,i){!0===n.screenSpacePanning?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),h.add(t)}}(),A=function(){var t=new i["x"];return function(e,i){var o=n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;t.copy(a).sub(n.target);var s=t.length();s*=Math.tan(n.object.fov/2*Math.PI/180),_(2*e*s/o.clientHeight,n.object.matrix),I(2*i*s/o.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(_(e*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),I(i*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function M(t){n.object.isPerspectiveCamera?m/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){n.object.isPerspectiveCamera?m*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function E(t){f.set(t.clientX,t.clientY)}function L(t){w.set(t.clientX,t.clientY)}function D(t){b.set(t.clientX,t.clientY)}function P(t){v.set(t.clientX,t.clientY),g.subVectors(v,f).multiplyScalar(n.rotateSpeed);var e=n.domElement;x(2*Math.PI*g.x/e.clientHeight),j(2*Math.PI*g.y/e.clientHeight),f.copy(v),n.update()}function N(t){S.set(t.clientX,t.clientY),C.subVectors(S,w),C.y>0?M(T()):C.y<0&&R(T()),w.copy(S),n.update()}function z(t){y.set(t.clientX,t.clientY),k.subVectors(y,b).multiplyScalar(n.panSpeed),A(k.x,k.y),b.copy(y),n.update()}function B(){}function $(t){t.deltaY<0?R(T()):t.deltaY>0&&M(T()),n.update()}function F(t){var e=!1;switch(t.keyCode){case n.keys.UP:A(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:A(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:A(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:A(-n.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),n.update())}function H(t){if(1==t.touches.length)f.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);f.set(e,n)}}function Y(t){if(1==t.touches.length)b.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);b.set(e,n)}}function q(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);w.set(0,i)}function U(t){n.enableZoom&&q(t),n.enablePan&&Y(t)}function G(t){n.enableZoom&&q(t),n.enableRotate&&H(t)}function V(t){if(1==t.touches.length)v.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY);v.set(e,i)}g.subVectors(v,f).multiplyScalar(n.rotateSpeed);var o=n.domElement;x(2*Math.PI*g.x/o.clientHeight),j(2*Math.PI*g.y/o.clientHeight),f.copy(v)}function X(t){if(1==t.touches.length)y.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY);y.set(e,i)}k.subVectors(y,b).multiplyScalar(n.panSpeed),A(k.x,k.y),b.copy(y)}function W(t){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+i*i);S.set(0,o),C.set(0,Math.pow(S.y/w.y,n.zoomSpeed)),M(C.y),w.copy(S)}function Z(t){n.enableZoom&&W(t),n.enablePan&&X(t)}function J(t){n.enableZoom&&W(t),n.enableRotate&&V(t)}function K(){}function Q(t){if(!1!==n.enabled){var e;switch(t.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case i["k"].DOLLY:if(!1===n.enableZoom)return;L(t),c=r.DOLLY;break;case i["k"].ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;D(t),c=r.PAN}else{if(!1===n.enableRotate)return;E(t),c=r.ROTATE}break;case i["k"].PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;E(t),c=r.ROTATE}else{if(!1===n.enablePan)return;D(t),c=r.PAN}break;default:c=r.NONE}c!==r.NONE&&(document.addEventListener("mousemove",tt,!1),document.addEventListener("mouseup",et,!1),n.dispatchEvent(a))}}function tt(t){if(!1!==n.enabled)switch(t.preventDefault(),c){case r.ROTATE:if(!1===n.enableRotate)return;P(t);break;case r.DOLLY:if(!1===n.enableZoom)return;N(t);break;case r.PAN:if(!1===n.enablePan)return;z(t);break}}function et(t){!1!==n.enabled&&(B(),document.removeEventListener("mousemove",tt,!1),document.removeEventListener("mouseup",et,!1),n.dispatchEvent(s),c=r.NONE)}function nt(t){!1===n.enabled||!1===n.enableZoom||c!==r.NONE&&c!==r.ROTATE||(t.preventDefault(),t.stopPropagation(),n.dispatchEvent(a),$(t),n.dispatchEvent(s))}function it(t){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&F(t)}function ot(t){if(!1!==n.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(n.touches.ONE){case i["s"].ROTATE:if(!1===n.enableRotate)return;H(t),c=r.TOUCH_ROTATE;break;case i["s"].PAN:if(!1===n.enablePan)return;Y(t),c=r.TOUCH_PAN;break;default:c=r.NONE}break;case 2:switch(n.touches.TWO){case i["s"].DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;U(t),c=r.TOUCH_DOLLY_PAN;break;case i["s"].DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;G(t),c=r.TOUCH_DOLLY_ROTATE;break;default:c=r.NONE}break;default:c=r.NONE}c!==r.NONE&&n.dispatchEvent(a)}}function at(t){if(!1!==n.enabled)switch(t.preventDefault(),t.stopPropagation(),c){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;V(t),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;X(t),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;Z(t),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;J(t),n.update();break;default:c=r.NONE}}function st(t){!1!==n.enabled&&(K(),n.dispatchEvent(s),c=r.NONE)}function rt(t){!1!==n.enabled&&t.preventDefault()}n.domElement.addEventListener("contextmenu",rt,!1),n.domElement.addEventListener("mousedown",Q,!1),n.domElement.addEventListener("wheel",nt,!1),n.domElement.addEventListener("touchstart",ot,!1),n.domElement.addEventListener("touchend",st,!1),n.domElement.addEventListener("touchmove",at,!1),n.domElement.addEventListener("keydown",it,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};o.prototype=Object.create(i["e"].prototype),o.prototype.constructor=o;var a=function(t,e){o.call(this,t,e),this.mouseButtons.LEFT=i["k"].PAN,this.mouseButtons.RIGHT=i["k"].ROTATE,this.touches.ONE=i["s"].PAN,this.touches.TWO=i["s"].DOLLY_ROTATE};a.prototype=Object.create(i["e"].prototype),a.prototype.constructor=a},d469:function(t,e,n){"use strict";var i=n("d6f3"),o=n.n(i);o.a},d6f3:function(t,e,n){},d70e:function(t,e,n){"use strict";n.r(e),e["default"]="// vertex shader: agent positions\n\nuniform float simulationTime;\nuniform float showSusceptible;\n\nattribute vec3 position2;  // x,y,t\n\n/**\n * First, second, third infection statuses are in .xyz each\n */\nattribute vec3 infectionTime;\nattribute vec3 infectionStatus;\n\n// this gets passed from vertex to fragment shader\nvarying float myInfectionStatus;\nvarying float skip;\nvarying float atRest;\n\nfloat calculateStatus() {\n\n    // are we before the first infection state?\n    if (simulationTime < infectionTime.x) return 0.0;\n\n    // is there only one infection state?\n    if (infectionStatus.y == -1.0) return infectionStatus.x;\n\n    // are we before the second infection state?\n    if (simulationTime < infectionTime.y) return infectionStatus.x;\n\n    // are there only two infection states?\n    if (infectionTime.z == -1.0) return infectionStatus.y;\n\n    // are we before the third infection state?\n    if (simulationTime < infectionTime.z) return infectionStatus.y;\n\n    // there can only be three infection states, and we are at the end\n    return infectionStatus.z;\n}\n\n\nfloat calculateSize() {\n\n    float small = 2.0;\n    float med = 5.0;\n    float big = 8.0;\n\n    if (myInfectionStatus == 0.0) return small;\n    else if (myInfectionStatus == 1.0) return big;\n    else if (myInfectionStatus < 6.0) return med;\n    return med;\n}\n\nfloat calculateTimestep(in vec3 point1, in vec3 point2) {\n\n    atRest = 0.0;\n\n    if (point1 == point2) {\n        atRest = 1.0;\n        return 0.0;\n    }\n\n    // position vars have time in the .z to save some space\n    if (simulationTime < position.z) return 0.0;\n    if (simulationTime > position2.z) return 1.0;\n\n    float progress = simulationTime - position.z;\n    float duration = position2.z - position.z;\n\n    return progress / duration;\n}\n\n\nvec3 interpolate(in vec3 point1, in vec3 point2, in float timestepFraction) {\n\n    if (timestepFraction == 0.0) {\n\n        return point1;\n\n    } else if (timestepFraction >= 1.0 ) {\n\n        return point2;\n\n    } else {\n\n        vec3 direction = point2 - point1;\n\n        return (direction * timestepFraction) + point1;\n    }\n}\n\n\nvoid main() {\n\n    // don't do anything if person is unaffected all day\n    if (showSusceptible == 0.0 && infectionStatus.x == 0.0 && infectionStatus.y == -1.0) {\n        gl_PointSize = 0.0;\n        gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n        skip = 1.0;\n        return;\n    }\n\n    myInfectionStatus = calculateStatus();\n\n    // don't do anything if this trip is currently out of time bounds\n    if (simulationTime < position.z || simulationTime > position2.z) {\n        gl_PointSize = 0.0;\n        gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n        skip = 1.0;\n        return;\n\n    } else {\n\n        // figure out z-index based on infection status\n        float zIndex = 0.2;\n        if (myInfectionStatus == 0.0) zIndex = 0.1;\n        else if (myInfectionStatus == 1.0) zIndex = 0.3;\n        else if (myInfectionStatus == 2.0) zIndex = 0.4;\n\n        // unpack coords from position buffers - x,y,time. Deal w/ z later\n        vec3 point1 = vec3(position.xy, zIndex);\n        vec3 point2 = vec3(position2.xy, zIndex);\n\n        float timestepFraction = calculateTimestep(point1, point2);\n\n        vec3 newPosition = interpolate(point1, point2, timestepFraction);\n\n        gl_PointSize = calculateSize();\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n\n        skip = 0.0;\n   }\n}\n"},d7ce:function(t,e,n){"use strict";var i=n("2d28"),o=n.n(i);o.a},ef04:function(t,e,n){"use strict";n.r(e),e["default"]="time\tday\tnSusceptible\tnInfectedButNotContagious\tnContagious\tnShowingSymptoms\tnSeriouslySick\tnCritical\tnTotalInfected\tnInfectedCumulative\tnRecovered\tnInQuarantine\tdistrict\r\n86400.0\t1\t4696700\t1000\t0\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n172800.0\t2\t4696700\t1000\t0\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n259200.0\t3\t4696700\t1000\t0\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n345600.0\t4\t4696700\t0\t1000\t0\t0\t0\t1000\t1000\t0\t0\tunknown\r\n432000.0\t5\t4692400\t4300\t1000\t0\t0\t0\t5300\t5300\t0\t0\tunknown\r\n518400.0\t6\t4692100\t4600\t100\t900\t0\t0\t5600\t5600\t0\t900\tunknown\r\n604800.0\t7\t4692100\t4600\t100\t900\t0\t0\t5600\t5600\t0\t900\tunknown\r\n691200.0\t8\t4692100\t300\t4400\t900\t0\t0\t5600\t5600\t0\t900\tunknown\r\n777600.0\t9\t4673300\t18800\t4700\t900\t0\t0\t24400\t24400\t0\t900\tunknown\r\n864000.0\t10\t4671100\t21000\t1000\t4400\t200\t0\t26600\t26600\t0\t4600\tunknown\r\n950400.0\t11\t4671000\t21100\t700\t4700\t200\t0\t26700\t26700\t0\t4900\tunknown\r\n1036800.0\t12\t4671000\t2300\t19500\t4700\t200\t0\t26700\t26700\t0\t4900\tunknown\r\n1123200.0\t13\t4538600\t132500\t21700\t4700\t200\t0\t159100\t159100\t0\t4900\tunknown\r\n1209600.0\t14\t4518700\t152300\t7000\t19300\t400\t0\t179000\t179000\t0\t19700\tunknown\r\n1296000.0\t15\t4517600\t153400\t5100\t21200\t400\t0\t180100\t180100\t0\t21600\tunknown\r\n1382400.0\t16\t4516600\t22000\t137400\t20500\t400\t0\t180300\t181100\t800\t21600\tunknown\r\n1468800.0\t17\t3846800\t671900\t157300\t20500\t400\t0\t850100\t850900\t800\t20900\tunknown\r\n1555200.0\t18\t3751300\t766300\t54100\t124000\t1200\t0\t945600\t946400\t800\t125200\tunknown\r\n1641600.0\t19\t3740100\t776500\t39200\t139800\t1100\t200\t956800\t957600\t800\t141100\tunknown\r\n1728000.0\t20\t3735700\t111100\t707700\t137000\t1100\t200\t957100\t962000\t4900\t141800\tunknown\r\n1814400.0\t21\t2671600\t1079700\t802400\t137500\t1100\t200\t2020900\t2026100\t5200\t139100\tunknown\r\n1900800.0\t22\t2560300\t1179800\t274000\t670300\t7900\t200\t2132200\t2137400\t5200\t678400\tunknown\r\n1987200.0\t23\t2544200\t1191500\t199700\t747900\t6900\t2100\t2148100\t2153500\t5400\t757100\tunknown\r\n2073600.0\t24\t2537100\t134500\t1251300\t742300\t6800\t2300\t2137200\t2160600\t23400\t765400\tunknown\r\n2160000.0\t25\t1940100\t620200\t1358900\t743900\t6800\t2300\t2732100\t2757600\t25500\t754800\tunknown\r\n2246400.0\t26\t1873000\t671200\t524300\t1564800\t36500\t2300\t2799100\t2824700\t25600\t1603600\tunknown\r\n2332800.0\t27\t1863100\t674000\t441600\t1649900\t34000\t9300\t2808800\t2834600\t25800\t1693400\tunknown\r\n2419200.0\t28\t1855200\t84900\t997300\t1565300\t33300\t10300\t2691100\t2842500\t151400\t1706400\tunknown\r\n2505600.0\t29\t1600100\t272900\t1054700\t1556200\t33300\t10300\t2927400\t3097600\t170200\t1614600\tunknown\r\n2592000.0\t30\t1551600\t311500\t589100\t1985900\t78100\t10300\t2974900\t3146100\t171200\t2074900\tunknown\r\n2678400.0\t31\t1542900\t312300\t545200\t2032500\t69900\t21900\t2981800\t3154800\t173000\t2125900\tunknown\r\n2764800.0\t32\t1536900\t63200\t661900\t1530000\t71000\t21500\t2347600\t3160800\t813200\t2132500\tunknown\r\n2851200.0\t33\t1388500\t163100\t688400\t1461000\t71300\t21400\t2405200\t3309200\t904000\t1627700\tunknown\r\n2937600.0\t34\t1343900\t199000\t490300\t1633400\t94800\t21400\t2438900\t3353800\t914900\t1757800\tunknown\r\n3024000.0\t35\t1334700\t202200\t457700\t1665000\t83500\t28500\t2436900\t3363000\t926100\t1787200\tunknown\r\n3110400.0\t36\t1330300\t58200\t385700\t865400\t89700\t21900\t1420900\t3367400\t1946500\t1783900\tunknown\r\n3196800.0\t37\t1240800\t103100\t403600\t784800\t90600\t21100\t1403200\t3456900\t2053700\t982200\tunknown\r\n3283200.0\t38\t1202700\t132000\t292100\t879900\t100700\t21300\t1426000\t3495000\t2069000\t1014300\tunknown\r\n3369600.0\t39\t1196800\t133500\t260400\t906600\t71400\t23400\t1395300\t3500900\t2105600\t1036600\tunknown\r\n3456000.0\t40\t1193400\t47400\t219800\t463000\t77900\t12400\t820500\t3504300\t2683800\t1009600\tunknown\r\n3542400.0\t41\t1134100\t68600\t239000\t417200\t79300\t10900\t815000\t3563600\t2748600\t556700\tunknown\r\n3628800.0\t42\t1110100\t86700\t170400\t475900\t86000\t10800\t829800\t3587600\t2757800\t580200\tunknown\r\n3715200.0\t43\t1106400\t87000\t141200\t498500\t41700\t12600\t781000\t3591300\t2810300\t602600\tunknown\r\n3801600.0\t44\t1104600\t29500\t145000\t308500\t44900\t5900\t533800\t3593100\t3059300\t557300\tunknown\r\n3888000.0\t45\t1074400\t35700\t155700\t275400\t44700\t5700\t517200\t3623300\t3106100\t361700\tunknown\r\n3974400.0\t46\t1064200\t42200\t111100\t311600\t48400\t5400\t518700\t3633500\t3114800\t372300\tunknown\r\n4060800.0\t47\t1061800\t42800\t92700\t323800\t26500\t6000\t491800\t3635900\t3144100\t384800\tunknown\r\n4147200.0\t48\t1061300\t13100\t89300\t215200\t25800\t4500\t347900\t3636400\t3288500\t359300\tunknown\r\n4233600.0\t49\t1047300\t16900\t88200\t184000\t25900\t3900\t318900\t3650400\t3331500\t246900\tunknown\r\n4320000.0\t50\t1042000\t19800\t64600\t198100\t29000\t4000\t315500\t3655700\t3340200\t238800\tunknown\r\n4406400.0\t51\t1040100\t21200\t57100\t200600\t19100\t5100\t303100\t3657600\t3354500\t238100\tunknown\r\n4492800.0\t52\t1039800\t7500\t52700\t132900\t18300\t3600\t215000\t3657900\t3442900\t226500\tunknown\r\n4579200.0\t53\t1030700\t11300\t49400\t105500\t18500\t3300\t188000\t3667000\t3479000\t155200\tunknown\r\n4665600.0\t54\t1028200\t11900\t38400\t111100\t20300\t3100\t184800\t3669500\t3484700\t138800\tunknown\r\n4752000.0\t55\t1026900\t12900\t33700\t112500\t13700\t3500\t176300\t3670800\t3494500\t138500\tunknown\r\n4838400.0\t56\t1026800\t3900\t28500\t70700\t12200\t2900\t118200\t3670900\t3552700\t131200\tunknown\r\n4924800.0\t57\t1022700\t5500\t26200\t53000\t12100\t2300\t99100\t3675000\t3575900\t86000\tunknown\r\n5011200.0\t58\t1022000\t4900\t19300\t57200\t12200\t2300\t95900\t3675700\t3579800\t74900\tunknown\r\n5097600.0\t59\t1021800\t5000\t16800\t57700\t9100\t2200\t90800\t3675900\t3585100\t73900\tunknown\r\n5184000.0\t60\t1021800\t900\t14800\t35300\t8100\t1100\t60200\t3675900\t3615700\t69900\tunknown\r\n5270400.0\t61\t1020800\t1200\t12200\t28800\t8000\t800\t51000\t3676900\t3625900\t44600\tunknown\r\n5356800.0\t62\t1020800\t1000\t8500\t30000\t8400\t700\t48600\t3676900\t3628300\t40800\tunknown\r\n5443200.0\t63\t1020800\t1000\t7800\t30200\t4900\t800\t44700\t3676900\t3632200\t39700\tunknown\r\n5529600.0\t64\t1020800\t0\t6200\t19300\t3900\t300\t29700\t3676900\t3647200\t36000\tunknown\r\n5616000.0\t65\t1020100\t700\t4900\t15700\t3900\t100\t25300\t3677600\t3652300\t23500\tunknown\r\n5702400.0\t66\t1020100\t700\t3600\t15000\t4000\t100\t23400\t3677600\t3654200\t20600\tunknown\r\n5788800.0\t67\t1020100\t700\t3500\t14800\t2200\t100\t21300\t3677600\t3656300\t19100\tunknown\r\n5875200.0\t68\t1020100\t0\t2600\t7800\t1800\t100\t12300\t3677600\t3665300\t17100\tunknown\r\n5961600.0\t69\t1019700\t400\t2300\t5600\t1600\t100\t10000\t3678000\t3668000\t9700\tunknown\r\n6048000.0\t70\t1019700\t400\t1400\t5200\t1600\t100\t8700\t3678000\t3669300\t7800\tunknown\r\n6134400.0\t71\t1019700\t400\t1400\t5100\t1100\t100\t8100\t3678000\t3669900\t6900\tunknown\r\n6220800.0\t72\t1019700\t0\t900\t2100\t800\t0\t3800\t3678000\t3674200\t6300\tunknown\r\n6307200.0\t73\t1019600\t100\t800\t1500\t700\t0\t3100\t3678100\t3675000\t2900\tunknown\r\n6393600.0\t74\t1019600\t100\t400\t1600\t800\t0\t2900\t3678100\t3675200\t2500\tunknown\r\n6480000.0\t75\t1019600\t100\t400\t1600\t300\t0\t2400\t3678100\t3675700\t2400\tunknown\r\n6566400.0\t76\t1019600\t0\t400\t700\t300\t0\t1400\t3678100\t3676700\t1900\tunknown\r\n6652800.0\t77\t1019600\t0\t400\t700\t300\t0\t1400\t3678100\t3676700\t1000\tunknown\r\n6739200.0\t78\t1019600\t0\t300\t700\t400\t0\t1400\t3678100\t3676700\t1100\tunknown\r\n6825600.0\t79\t1019600\t0\t300\t700\t200\t0\t1200\t3678100\t3676900\t1100\tunknown\r\n6912000.0\t80\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t900\tunknown\r\n6998400.0\t81\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t500\tunknown\r\n7084800.0\t82\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t500\tunknown\r\n7171200.0\t83\t1019600\t0\t100\t300\t200\t0\t600\t3678100\t3677500\t500\tunknown\r\n7257600.0\t84\t1019600\t0\t0\t100\t200\t0\t300\t3678100\t3677800\t500\tunknown\r\n7344000.0\t85\t1019600\t0\t0\t100\t200\t0\t300\t3678100\t3677800\t300\tunknown\r\n7430400.0\t86\t1019600\t0\t0\t100\t200\t0\t300\t3678100\t3677800\t300\tunknown\r\n7516800.0\t87\t1019600\t0\t0\t100\t100\t0\t200\t3678100\t3677900\t300\tunknown\r\n7603200.0\t88\t1019600\t0\t0\t0\t100\t0\t100\t3678100\t3678000\t200\tunknown\r\n7689600.0\t89\t1019600\t0\t0\t0\t100\t0\t100\t3678100\t3678000\t100\tunknown\r\n7776000.0\t90\t1019600\t0\t0\t0\t100\t0\t100\t3678100\t3678000\t100\tunknown\r\n7862400.0\t91\t1019600\t0\t0\t0\t0\t0\t0\t3678100\t3678100\t100\tunknown\r\n7948800.0\t92\t1019600\t0\t0\t0\t0\t0\t0\t3678100\t3678100\t0\tunknown\r\n"},fafd:function(t,e,n){"use strict";n.r(e),e["default"]="// vertex shader: agent positions\n\nuniform float simulationTime;\nuniform float showSusceptible;\n\nattribute vec3 position2;  // x,y,t\n\n/**\n * First, second, third infection statuses are in .xyz each\n */\nattribute vec3 infectionTime;\nattribute vec3 infectionStatus;\n\n// this gets passed from vertex to fragment shader\nvarying float myInfectionStatus;\nvarying float skip;\nvarying float atRest;\n\nfloat calculateStatus() {\n\n    // are we before the first infection state?\n    if (simulationTime < infectionTime.x) return 0.0;\n\n    // is there only one infection state?\n    if (infectionStatus.y == -1.0) return infectionStatus.x;\n\n    // are we before the second infection state?\n    if (simulationTime < infectionTime.y) return infectionStatus.x;\n\n    // are there only two infection states?\n    if (infectionTime.z == -1.0) return infectionStatus.y;\n\n    // are we before the third infection state?\n    if (simulationTime < infectionTime.z) return infectionStatus.y;\n\n    // there can only be three infection states, and we are at the end\n    return infectionStatus.z;\n}\n\n\nfloat calculateSize() {\n\n    float small = 2.0;\n    float med = 5.0;\n    float big = 8.0;\n\n    if (myInfectionStatus == 0.0) return small;\n    else if (myInfectionStatus == 1.0) return big;\n    else if (myInfectionStatus < 6.0) return med;\n    return med;\n}\n\nfloat calculateTimestep(in vec3 point1, in vec3 point2) {\n\n    atRest = 0.0;\n\n    if (point1 == point2) {\n        atRest = 1.0;\n        return 0.0;\n    }\n\n    // position vars have time in the .z to save some space\n    if (simulationTime < position.z) return 0.0;\n    if (simulationTime > position2.z) return 1.0;\n\n    float progress = simulationTime - position.z;\n    float duration = position2.z - position.z;\n\n    return progress / duration;\n}\n\n\nvec3 interpolate(in vec3 point1, in vec3 point2, in float timestepFraction) {\n\n    if (timestepFraction == 0.0) {\n\n        return point1;\n\n    } else if (timestepFraction >= 1.0 ) {\n\n        return point2;\n\n    } else {\n\n        vec3 direction = point2 - point1;\n\n        return (direction * timestepFraction) + point1;\n    }\n}\n\n\nvoid main() {\n\n    // don't do anything if person is unaffected all day\n    if (showSusceptible == 0.0 && infectionStatus.x == 0.0 && infectionStatus.y == -1.0) {\n        gl_PointSize = 0.0;\n        gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n        skip = 1.0;\n        return;\n    }\n\n    myInfectionStatus = calculateStatus();\n\n    // don't do anything if this trip is currently out of time bounds\n    if (simulationTime < position.z || simulationTime > position2.z) {\n        gl_PointSize = 0.0;\n        gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n        skip = 1.0;\n        return;\n\n    } else {\n\n        // figure out z-index based on infection status\n        float zIndex = 0.2;\n        if (myInfectionStatus == 0.0) zIndex = 0.1;\n        else if (myInfectionStatus == 1.0) zIndex = 0.3;\n        else if (myInfectionStatus == 2.0) zIndex = 0.4;\n\n        // unpack coords from position buffers - x,y,time. Deal w/ z later\n        vec3 point1 = vec3(position.xy, zIndex);\n        vec3 point2 = vec3(position2.xy, zIndex);\n\n        float timestepFraction = calculateTimestep(point1, point2);\n\n        vec3 newPosition = interpolate(point1, point2, timestepFraction);\n\n        gl_PointSize = calculateSize();\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n\n        skip = 0.0;\n   }\n}\n"}});